<ac:structured-macro ac:name="details" ac:schema-version="1" ac:macro-id="2f95c83d-1e6b-4368-90b5-db706a83e058"><ac:parameter ac:name="id">requirements</ac:parameter><ac:rich-text-body>
<table class="relative-table wrapped" style="width: 89.006%;"><colgroup><col style="width: 21.9306%;" /><col style="width: 78.0694%;" /></colgroup>
<tbody>
<tr>
<th><span style="color: rgb(0,0,0);">Epic в JIRA продукта</span></th>
<td><br /></td></tr>
<tr>
<th><span style="color: rgb(0,0,0);">Ссылка на CR/STORY команды</span></th>
<td>
<div class="content-wrapper">
<p><a href="https://jira.delta.sbrf.ru/browse/AFPE-4449" class="">https://jira.delta.sbrf.ru/browse/AFPE-4449</a></p></div></td></tr>
<tr>
<th style="text-align: left;"><span style="color: rgb(0,0,0);">PO продукта&nbsp;</span></th>
<td style="text-align: left;"><ac:link><ri:user ri:userkey="8aae693a90939a0b019096bdcdd70006" /></ac:link>&nbsp;</td></tr>
<tr>
<th style="text-align: left;"><span style="color: rgb(0,0,0);">Системный аналитик&nbsp;</span></th>
<td style="text-align: left;"><ac:link><ri:user ri:userkey="8aa405e665e51f550165e6accb93000a" /></ac:link>&nbsp;</td></tr>
<tr>
<th>
<div class="content-wrapper">
<p>Статус согласования</p></div></th>
<td>
<div class="content-wrapper">
<p><ac:structured-macro ac:name="pagestatus" ac:schema-version="1" ac:macro-id="78e6cbf4-f1c3-4d8e-a397-5be1651a0856" /></p></div></td></tr>
<tr>
<th>БТ</th>
<td><br /></td></tr>
<tr>
<th>Описание архитектуры</th>
<td><br /></td></tr>
<tr>
<th>Макеты</th>
<td><br /></td></tr></tbody></table></ac:rich-text-body></ac:structured-macro>
<h1><br /><br /></h1><ac:structured-macro ac:name="numberedheadings" ac:schema-version="1" ac:macro-id="07a00a23-bb8d-41b3-afbc-c102f657467c"><ac:rich-text-body><ac:structured-macro ac:name="expand" ac:schema-version="1" ac:macro-id="eeade700-56fc-475e-93f0-218761db02b1"><ac:parameter ac:name="title">Оглавление</ac:parameter><ac:rich-text-body>
<p><ac:structured-macro ac:name="toc" ac:schema-version="1" ac:macro-id="06871eb8-97e9-4b83-ad76-e460bbc9d49c" /></p></ac:rich-text-body></ac:structured-macro><ac:structured-macro ac:name="expand" ac:schema-version="1" ac:macro-id="14e0ae5f-e72e-4984-abfc-9cc69a1fd0c0"><ac:parameter ac:name="title">История</ac:parameter><ac:rich-text-body>
<h1>Изменения</h1>
<table class="wrapped"><colgroup><col /><col /><col /></colgroup>
<tbody>
<tr>
<th>Дата</th>
<th>Описание</th>
<th>Автор</th></tr>
<tr>
<td><ac:placeholder>указываем дату изменения</ac:placeholder></td>
<td><ac:placeholder>указываем что изменили</ac:placeholder></td>
<td><ac:placeholder>указываем автора изменения</ac:placeholder></td></tr>
<tr>
<td colspan="1"><ac:placeholder>01.01.23</ac:placeholder></td>
<td colspan="1"><ac:placeholder>Статья создана</ac:placeholder></td>
<td colspan="1">
<div class="content-wrapper">
<p><ac:placeholder>Захаров Константин Владимирович </ac:placeholder></p></div></td></tr></tbody></table></ac:rich-text-body></ac:structured-macro>
<h1>Общие сведения</h1>
<h2>Описание доработки</h2>
<p>Необходимо доработать импорт/экспорт элементов из/в CSV-файла с учетом следующих изменений в формате файла:</p>
<p>1) CSV-файл не должен содержать заголовков в структуре файла</p>
<p>2) СSV-файл имеет следующий порядок&nbsp; полей в строке:</p>
<ul class="alternate">
<li>Значение (VALUE)</li>
<li>Описание (DESCRIPTION)</li>
<li>Дата начала действия (TTLFROM)</li>
<li>Дата окончания действия (TTLTO)</li></ul>
<p>Параметр &quot;Значение&quot; содержит либо только value1, либо пару значений (в случае диапазона данных&nbsp; IPAddress в формате <span style="color: rgb(0,0,0);"><span>&nbsp;</span>IPv4 или IPv6</span>), объединенных дефисом value1-value2.<br />В случае, если значение содержит пару value1-value2, в bo-frontend осуществляется валидация и раскладывание value1 и value2 по отдельным полям value1 и value2 в таблицу bfp-bo-attribute.list_items</p>
<p>3) Доработана загрузка файла для импорта элементов, которые содержат идентификаторы (идентификаторы ЕПК, номера телефонов, ИНН и т.д. ). Выгружается файл со строками, содержащими ошибки, который, после ручной корректировки пользователем, можно загрузить через новую радио-кнопку Идентификатор.&nbsp;</p>
<p>При загрузке&nbsp; после нажатия кнопки &quot;Добавить&quot;&nbsp; корректные элементы списка загружаются, а по некорректным значениям (ошибка формата или pan) формируется файл на скачивание с добавленным пятым столбцом, содержащим комментарий с описанием ошибки(по одному элементу может выводиться несколько комментариев с различными ошибками).Радио-кнопка Идентификатор позволяет загрузить полученный файл без валидации по алгоритму Луна (для элементов файла проставляется флаг allowId)</p>
<pre><br /></pre>
<p>4) Элементы с истекшим сроком жизни не показываем в интерфейсе и не передаем в файл для экспорта.&nbsp;</p>
<h2>Изменения в архитектуре системы&nbsp;&nbsp;</h2>
<p>Изменений в архитектуре не предусмотрено.</p>
<h2>Бизнес логика</h2>
<h1>Список компонентов&nbsp;</h1>
<p>Доработке подлежат bo-frontend, bo-attribute, bo-list-import</p>
<h1>Функциональные требования</h1>
<p><br /></p>
<h2>Компонент bo-frontend</h2>
<table class="relative-table wrapped"><colgroup><col style="width: 21.9306%;" /><col style="width: 78.0694%;" /></colgroup>
<tbody>
<tr>
<th colspan="1"><span style="color: rgb(0,0,0);">GIT repository</span></th>
<td colspan="1"><a class="" href="https://stash.sigma.sbrf.ru/projects/TAF_ARM/repos/bo-frontend/browse" style="text-align: left;" rel="nofollow">https://stash.sigma.sbrf.ru/projects/TAF_ARM/repos/bo-frontend/browse</a></td></tr>
<tr>
<th colspan="1"><span style="color: rgb(0,0,0);">Ответственный за компонент</span></th>
<td colspan="1"><br /></td></tr>
<tr>
<th style="text-align: left;" colspan="1"><span style="color: rgb(0,0,0);">Ссылка на задачу</span></th>
<td style="text-align: left;" colspan="1"><br /></td></tr></tbody></table>
<p>Дорабатывается импорт элементов в CSV-файл с учетом следующих изменений в формате файла:</p>
<p>1) CSV-файл не должен содержать заголовков в структуре файла</p>
<p>2) СSV-файл имеет следующий порядок&nbsp; полей в строке:</p>
<ul class="alternate">
<li>Значение (VALUE)</li>
<li>Описание (DESCRIPTION)</li>
<li>Дата начала действия (TTLFROM)</li>
<li>Дата окончания действия (TTLTO)</li></ul>
<p>Пример содержимого импортируемого файла:</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="0fbaaa3c-9c6f-4cf5-9e5c-2185b920f505"><ac:plain-text-body><![CDATA["84.222.222.222";"Какое-то_описание1";"20.09.2024 15:00";"23.09.2024 12:21"
"85.222.222.222-85.222.222.223";"Какое-то_описание2";"20.09.2024 15:01";"23.09.2024 12:22"
"2001:0db8:11a3:09d7:1f34:8a2e:0:0-2001:0db8:11a3:09d7:1f34:8a2e:07a0:765d";"";"20.09.2024 15:02";"23.09.2024 12:23"]]></ac:plain-text-body></ac:structured-macro>
<p><br /></p>
<p><br /></p>
<p>Параметр &quot;Значение&quot; содержит либо только value1, либо пару значений (в случае диапазона данных&nbsp; IPAddress в формате <span style="color: rgb(0,0,0);"><span>&nbsp;</span>IPv4 или IPv6</span>), объединенных дефисом value1-value2.</p>
<p>В случае, если &quot;Значение&quot; содержит точечное значение (не содержит дефиса), формат String или IPAddress, то оно кладется в в таблицу bfp-bo-attribute.list_items в поле value1.<br />В случае, если &quot;Значение&quot; содержит&nbsp; диапазон значений через дефис value1-value2 (формат IPAddress), в bo-frontend осуществляется валидация, парсинг файла и раскладывание value1(значение начала диапазона) и value2(значение окончания диапазона) по отдельным полям value1 и value2 в таблицу bfp-bo-attribute.list_items.&nbsp;</p>
<p><br /></p>
<p>Для Даты начала действия&nbsp; (TTLFROM) и Даты окончания действия (TTLTO) должен соблюдаться следующий формат:</p>
<table class="relative-table wrapped" style="width: 47.4245%;"><colgroup><col style="width: 33.2051%;" /><col style="width: 13.7886%;" /><col style="width: 52.977%;" /></colgroup>
<tbody>
<tr>
<th scope="col"><span style="color: rgb(0,0,0);">Система</span></th>
<th scope="col"><span style="color: rgb(0,0,0);">Время</span></th>
<th scope="col"><span style="color: rgb(0,0,0);">Описание</span></th></tr>
<tr>
<td><span style="color: rgb(0,0,0);">Пользовательский UI</span></td>
<td><span style="color: rgb(0,0,0);">UTC+3</span></td>
<td><span style="color: rgb(0,0,0);">Отображение Даты начала действия и Даты окончания действия в интерфейсе - время по Москве в формате UTC.&nbsp;</span></td></tr>
<tr>
<td><span style="color: rgb(0,0,0);">База данных<span>&nbsp;</span></span></td>
<td><span style="color: rgb(0,0,0);">UTC 0</span></td>
<td><span style="color: rgb(0,0,0);">Дата начала действия и Дата окончания действия хранятся в БД&nbsp; в формате UTC(время по Москве минуc 3ч.)</span></td></tr>
<tr>
<td><span style="color: rgb(0,0,0);">Экспорт<span>&nbsp;</span></span></td>
<td><span style="color: rgb(0,0,0);">UTC+3</span></td>
<td><span style="color: rgb(0,0,0);">При экспорте в файле Дата начала действия и Дата окончания действия выводятся в формате UTC (время по Москве)</span></td></tr>
<tr>
<td><span style="color: rgb(0,0,0);"><span>Импорт</span></span></td>
<td><span style="color: rgb(0,0,0);">UTC+3</span></td>
<td><span style="color: rgb(0,0,0);">При импорте в файле ожидаются Дата начала действия и Дата окончания действия в формате UTC (время по Москве)</span></td></tr></tbody></table>
<p><br /></p>
<p><br /></p>
<p>Текст ошибок отображается в колонке с комментарием - в файле с ошибками. Но при последующем импорте скорректированного файла этот столбец не учитывается.</p>
<p><br /></p>
<table class="relative-table wrapped" style="width: 87.5888%;" data-snooker-locked-cols="1"><colgroup><col style="width: 4.33609%;" /><col style="width: 44.6542%;" /><col style="width: 28.6098%;" /><col style="width: 22.3651%;" /></colgroup>
<tbody>
<tr>
<th scope="col"><br /></th>
<th scope="col">Ошибка</th>
<th scope="col">Комментарий в файле с ошибками</th>
<th scope="col">
<div class="content-wrapper">
<p><s>Реакция на ошибку</s></p></div></th></tr>
<tr>
<td>1</td>
<td><span style="color: rgb(23,43,77);">bo-frontend обнаружил пустое значение (&quot;&quot;) <strong>в первом поле (Значение)</strong> в CSV файле</span></td>
<td><strong><span style="color: rgb(23,43,77);">Пустое значение в первом поле</span></strong></td>
<td>
<p style="text-align: left;"><s>В модальном окне отобразится сообщение об ошибке:&nbsp;</s></p>
<p style="text-align: left;"><s><strong>Ошибка данных</strong></s></p>
<p style="text-align: left;"><s><strong>В строке &lt;номер строки&gt; в первом поле указано пустое значение</strong></s></p></td></tr>
<tr>
<td>2</td>
<td><span style="color: rgb(23,43,77);">bo-frontend обнаружил неподдерживаемые символы или количество этих символов вне диапазона от 13 до 19 цифр<strong> в первом поле</strong> <strong>(Значение)</strong> в CSV файле</span></td>
<td><strong><span style="color: rgb(23,43,77);">Некорректное значение номера карты в первом поле</span></strong></td>
<td>
<p style="text-align: left;"><s>В модальном окне отобразится сообщение об ошибке:&nbsp;</s></p>
<p style="text-align: left;"><s><strong>Ошибка данных</strong></s></p>
<p style="text-align: left;"><s><strong>В строке &lt;номер строки&gt; в первом поле обнаружено некорректное<span>&nbsp;</span>значение номера карты&nbsp;</strong></s></p></td></tr>
<tr>
<td>3</td>
<td><span style="color: rgb(23,43,77);">в ходе импорта элементов, не являющимися номерами карт bo-frontend в CSV файле, <strong>в первом поле (Значение)</strong>, обнаружил номер карты (только цифры, от 13 до 19 символов, сработал алгоритм Луна)</span></td>
<td><strong><span style="color: rgb(23,43,77);">Открытый номер карты в первом поле</span></strong></td>
<td>
<p style="text-align: left;"><s>В модальном окне отобразится сообщение об ошибке:&nbsp;</s></p>
<p style="text-align: left;"><s><strong>Ошибка данных</strong></s></p>
<p style="text-align: left;"><s><strong>В строке &lt;номер строки&gt; в первом поле обнаружен открытый номер карты</strong></s></p></td></tr>
<tr>
<td>4</td>
<td><span style="color: rgb(23,43,77);">bo-frontend обнаружил непустое значение более 512 символов <strong>в первом поле</strong> (Значение) в CSV файле</span></td>
<td><strong><span style="color: rgb(23,43,77);">Некорректное значение в первом поле. Максимум 512 символов</span></strong></td>
<td>
<p style="text-align: left;"><s>В модальном окне отобразится сообщение об ошибке:&nbsp;</s></p>
<p style="text-align: left;"><s><strong>Ошибка данных</strong></s></p>
<p style="text-align: left;"><s><strong>В строке &lt;номер строки&gt; в первом поле обнаружено некорректное значение. Максимум 512 символов</strong></s></p></td></tr>
<tr>
<td>5</td>
<td><span style="color: rgb(23,43,77);">bo-frontend обнаружил непустое значение более 1000 символов <strong>во втором поле</strong> (Описание) в CSV файле</span></td>
<td><strong><span style="color: rgb(23,43,77);">Некорректное значение в Описании (второе поле). Максимум 1000 символов</span></strong></td>
<td>
<p style="text-align: left;"><s>В модальном окне отобразится сообщение об ошибке:&nbsp;</s></p>
<p style="text-align: left;"><s><strong>Ошибка данных</strong></s></p>
<p style="text-align: left;"><s><strong>В строке &lt;номер строки&gt; в Описании (втором поле) обнаружено некорректное значение. Максимум 1000 символов</strong></s></p></td></tr>
<tr>
<td>6</td>
<td><span style="color: rgb(23,43,77);">bo-frontend обнаружил непустое значение <strong>в третьем поле</strong> (Дата начала), в котором имеется отклонение от формата DD.MM.YYYY HH:MM Например, Дата задана в формате UnixTime- &quot;1726906374&quot;</span></td>
<td><span style="color: rgb(23,43,77);"><strong>Некорректное значение Даты начала действия (третье поле). Требуемый формат DD.MM.YYYY HH:MM</strong></span></td>
<td>
<p style="text-align: left;"><s>В модальном окне отобразится сообщение об ошибке:&nbsp;</s></p>
<p style="text-align: left;"><s><strong>Ошибка данных</strong></s></p>
<p style="text-align: left;"><s><strong>В строке &lt;номер строки&gt; обнаружено некорректное значение Даты начала действия (третье поле). Требуемый формат DD.MM.YYYY HH:MM</strong></s></p></td></tr>
<tr>
<td>7</td>
<td><span style="color: rgb(23,43,77);">bo-frontend обнаружил непустое значение <strong>в четвертом поле</strong> (Дата окончания), в котором имеется отклонение от формата DD.MM.YYYY HH:MM Например, Дата задана в формате UnixTime- &quot;1726906374&quot;</span></td>
<td><span style="color: rgb(23,43,77);"><strong>Некорректное значение Даты окончания действия (четвертое поле). Требуемый формат DD.MM.YYYY HH:MM</strong></span></td>
<td>
<p style="text-align: left;"><s>В модальном окне отобразится сообщение об ошибке:&nbsp;</s></p>
<p style="text-align: left;"><s><strong>Ошибка данных</strong></s></p>
<p style="text-align: left;"><s><strong>В строке &lt;номер строки&gt; обнаружено некорректное значение Даты окончания действия (четвертое поле). Требуемый формат DD.MM.YYYY HH:MM</strong></s></p></td></tr>
<tr>
<td>8</td>
<td><span style="color: rgb(23,43,77);">bo-frontend обнаружил, что дата и время в третьем поле (Дата начала) и четвертом поле (Дата окончания) указаны в корректном формате, но значение поля Дата начала идет равным или позднее значения поля Дата окончания, т.е. нулевой или отрицательный временной интервал.</span></td>
<td><span style="color: rgb(23,43,77);"><strong><span style="color: rgb(0,0,0);"><span>Дата начала действия (третье поле) не может быть больше даты окончания действия (четвертое поле)</span></span></strong></span></td>
<td>
<p style="text-align: left;"><s>В модальном окне отобразится сообщение об ошибке:&nbsp;</s></p>
<p style="text-align: left;"><s><strong>Ошибка данных</strong></s></p>
<p style="text-align: left;"><s><strong>В строке &lt;номер строки&gt; <span style="color: rgb(0,0,0);"><span>дата начала действия (третье поле) не может быть больше даты окончания действия (четвертое поле)</span></span></strong></s></p></td></tr>
<tr>
<td>9</td>
<td><span style="color: rgb(23,43,77);">bo-frontend обнаружил набор символов, не представляющих адрес IPv4 или IPv6 в первом поле в CSV файле</span></td>
<td><span style="color: rgb(23,43,77);"><strong>В первом поле обнаружено некорректное значение IP-адреса. Поддерживаются только IPv4 или IPv6 или диапазон IP-адресов, объединенных дефисом</strong></span></td>
<td>
<p style="text-align: left;"><s>В модальном окне отобразится сообщение об ошибке:&nbsp;</s></p>
<p style="text-align: left;"><s><strong>Ошибка данных</strong></s></p>
<p style="text-align: left;"><s><strong>В строке &lt;номер строки&gt; в первом поле обнаружено некорректное значение IP-адреса. Поддерживаются только IPv4 или IPv6 или диапазон IP-адресов, объединенных дефисом</strong></s></p></td></tr>
<tr>
<td>10</td>
<td><span style="color: rgb(23,43,77);"><span style="color: rgb(0,0,0);">bo-frontend обнаружил, что в записи диапазона в первом поле совпадают начало и окончание или окончание диапазона оказалось меньше начала</span></span></td>
<td><span style="color: rgb(23,43,77);"><span style="color: rgb(0,0,0);"><strong>В первом поле второй IP-адрес должен быть больше первого IP-адреса</strong></span></span></td>
<td>
<p style="text-align: left;"><s><span style="color: rgb(0,0,0);">В модальном окне отобразится сообщение об ошибке:&nbsp;</span></s></p>
<p style="text-align: left;"><s><span style="color: rgb(0,0,0);"><strong>Ошибка данных</strong></span></s></p>
<p style="text-align: left;"><s><span style="color: rgb(0,0,0);"><strong>В строке &lt;номер строки&gt; в первом поле второй IP-адрес должен быть больше первого IP-адреса</strong></span></s></p></td></tr>
<tr>
<td>11</td>
<td><span style="color: rgb(23,43,77);"><span style="color: rgb(0,0,0);">bo-frontend обнаружил слишком большой диапазон IPv6. Его границы затрагивают более двух последних хекстетов</span></span></td>
<td><span style="color: rgb(23,43,77);"><span style="color: rgb(0,0,0);"><strong><span>В первом поле</span></strong>&nbsp;<strong>задан слишком большой диапазон значений IPv6. Допускается различие между первым и вторым значением диапазона только в 2-х последних 4-значных хекстета</strong></span></span></td>
<td>
<p style="text-align: left;"><s>В модальном окне отобразится сообщение об ошибке:&nbsp;</s></p>
<p style="text-align: left;"><s><strong>Ошибка данных</strong></s></p>
<p style="text-align: left;"><s><strong>В строке &lt;номер строки&gt;<span> в первом поле</span></strong>&nbsp;<strong>задан слишком большой диапазон значений IPv6. Допускается различие между первым и вторым значением диапазона только в 2-х последних 4-значных хекстетах</strong></s></p></td></tr>
<tr>
<td>12</td>
<td><span style="color: rgb(23,43,77);"><span style="color: rgb(0,0,0);"><span style="color: rgb(23,43,77);">bo-frontend<span>&nbsp;</span></span>обнаружил, что<span>&nbsp;</span><span style="color: rgb(23,43,77);">при указании диапазона первом поле в одном из значений оказался корректный IPv4, в другом - корректный IPv6.</span></span></span></td>
<td><span style="color: rgb(23,43,77);"><span style="color: rgb(0,0,0);"><span style="color: rgb(23,43,77);"><strong>Тип версии IP для обоих значений диапазона должен быть IPv4 или IPv6</strong></span></span></span></td>
<td>
<p style="text-align: left;"><s>В модальном окне отобразится сообщение об ошибке:&nbsp;</s></p>
<p style="text-align: left;"><s><strong>Ошибка данных</strong></s></p>
<p style="text-align: left;"><s><strong>В строке &lt;номер строки&gt; тип версии IP для обоих значений диапазона должен быть IPv4 или IPv6</strong></s></p></td></tr></tbody></table>
<p><br /></p>
<p>Успешно загруженные элементы списка должны появляться в модальном окне &quot;Элементы списка&quot; не дожидаясь принудительного обновления страницы в браузере.</p>
<p><br /></p>
<p>3) Доработана загрузка файла для импорта элементов, которые содержат идентификаторы (идентификаторы ЕПК, номера телефонов, ИНН и т.д. ). Выгружается файл со строками, содержащими ошибки (5-й столбец с комментарием) который, после ручной корректировки пользователем, можно загрузить через радио-кнопку Идентификатор. При загрузке скорректированного файла через Идентификатор столбец с комментарием не учитывается, и колонки, как и в исходном файле не имеют заголовков. П<span style="color: rgb(23,43,77);">о одному элементу может выводиться несколько комментариев с различными ошибками.</span></p>
<p><span style="color: rgb(23,43,77);">При добавлении элемента в список, через радио-кнопку &quot;Другое&quot;, если система посчитает этот элемент номером карты, то пользователь может добавить элемент через кнопку Идентификатор. При этом отобразится модальное окно с подтверждением.</span></p>
<p><span style="color: rgb(23,43,77);">При импорте логика такая же: после загрузки, если система считает, что в файле есть номера карт, то часть строк загружается , а часть сохраняется в файле с ошибками, который требуется проверить, очистить от ошибок и загрузить по кнопке Идентификатор с дополнительный подтверждением.</span></p>
<p>Радио-кнопка Идентификатор позволяет загрузить элемент или полученный файл без валидации по алгоритму Луна (для элементов проставляется флаг allowId)</p>
<p><br /></p>
<p>4) Срок хранения элемента может задаваться двумя способами:</p>
<ul>
<li>В самом элементе при активации чекбокса Период действия;</li>
<li>Для всех элементов списка в карточке Параметры при активации чексбокса &quot;Автоматическое удаление элементов списка&quot; с указанием <span style="color: rgb(77,77,77);">Срока хранения элементов (в днях)</span></li></ul>
<p><span style="color: rgb(77,77,77);">По истечении заданного срока хранения элементов, элементы не отображаются в интерфейсе в блоке &quot;Элементы списка&quot; (но при этом продолжают храниться в БД)</span></p>
<p><span style="color: rgb(77,77,77);">Используется следующая логика выбора актуальных элементов.</span></p>
<ol>
<li><span style="color: rgb(77,77,77);">Если для списка задан параметр &quot;Срок хранения элемент (в днях)&quot;, то </span>для каждого элемента вычисляется его рассчитанный срок хранения:</li></ol>
<ul>
<li style="list-style-type: none;">
<ul>
<li style="letter-spacing: 0.0px;">Если указана Дата окончания (TTLTO), то рассчитанный срок хранения = минимальная из TTLTO и (TTLFROM +<span style="color: rgb(77,77,77);">&quot;Срок хранения элемент (в днях)&quot;</span> &nbsp;или Дата создания&nbsp; + <span style="color: rgb(77,77,77);">&quot;Срок хранения элемент (в днях)&quot;</span>)</li></ul></li></ul><br />
<ul>
<ul>
<li>Если TTLTO не задан,&nbsp; рассчитанный срок хранения элементов рассчитывается аналогично.</li></ul></ul>
<p style="margin-left: 40.0px;"><span style="color: rgb(77,77,77);"><code>     * Элемент считается актуальным, если текущая дата меньше рассчитанного срока хранения<br /></code></span>2. Если для списка параметр<span style="color: rgb(77,77,77);"> &quot;Срок хранения элемент (в днях)&quot;</span> не задан , то применяется стандартная логика:</p>
<p style="margin-left: 40.0px;">элемент считается актуальным, если либо не задано значение TTLTO, либо TTLTO всё ещё в будущем</p>
<h3>UX/UI&nbsp;</h3>
<p><a href="https://pixso.design.sber.ru/app/editor/QRVUPCHF4xFjM8Xn81cVQA?icon_type=1&amp;page-id=235%3A270256&amp;item-id=1272%3A171639">Ссылка на макет</a></p>
<p>В макет карточки Импорта добавлена радио-кнопка Идентификатор <span style="color: rgb(23,43,77);">для импорта цифровых последовательностей, похожих на номер карты (но не являющиеся номером карты).</span></p>
<p><span style="color: rgb(23,43,77);">Теперь импорт и добавление элементов может осуществляться по 3 радио-кнопкам:</span></p>
<p><span style="color: rgb(0,0,0);">Другой (не пропускаются номера карт и остальные ошибки формата)</span><br /><span style="color: rgb(0,0,0);">Номер карты (PAN) ( не пропускаются НЕ номера карт и остальные ошибки формата)</span><br /><span style="color: rgb(0,0,0);">Идентификатор: (пропускается все, кроме кроме ошибок формата)</span></p>
<p><span style="color: rgb(23,43,77);"><ac:image ac:width="1000"><ri:attachment ri:filename="image-2025-2-11_16-5-18.png" /></ac:image></span></p>
<p>При единичном добавлении элемента по радио-кнопке Другой&nbsp; &nbsp;при нахождении ошибок структуры/цифры, похожие на номер карты, поле подсвечивается красным, и выводится</p>
<p style="text-align: left;"><span>&nbsp;</span>tooltip &quot;Номер карты не может быть добавлен в открытом виде&quot;. <span style="color: rgb(23,43,77);">Запрос createListItem не направляется. У пользователя есть возможность загрузить такое значение, не являющееся номером карты по кнопке Идентификатор, после дополнительного подтверждения:</span></p>
<p style="text-align: left;"><span style="color: rgb(23,43,77);"><ac:image ac:width="1300"><ri:attachment ri:filename="image-2025-2-13_17-58-29.png" /></ac:image></span></p>
<p style="text-align: left;">Редактировании элемента списка доступно только по тому Типу элемента, через который элемент был добавлен. Две другие радио-кнопки&nbsp; заблокированы.&nbsp;</p>
<p style="text-align: left;"><br /></p>
<p><span style="letter-spacing: 0.0px;">При импорте файла через тип элемента Другой:</span></p>
<ul style="list-style-type: square;">
<li><span style="letter-spacing: 0.0px;">Валидные значения (без ошибок) импортируются&nbsp; и сохраняются (cписок частично загружается)</span></li>
<li><span style="letter-spacing: 0.0px;">Невалидные или похожие на номер карты значения формируются в отдельный файл со строками (для импорта списка), которые не прошли валидацию, с комментариями ошибок (новый столбец в csv, при импорте этот столбец не должен учитываться)</span></li></ul>
<p><ac:image ac:width="1000"><ri:attachment ri:filename="image-2025-2-14_9-46-26.png" /></ac:image></p>
<p><span style="color: rgb(0,0,0);">После ручной корректировки оператором итоговый файл загружается по радио-кнопке Идентификатор.&nbsp; При загрузке скорректированного файла через Идентификатор столбец с комментарием не учитывается, и колонки, как и в исходном файле не имеют заголовков.</span></p>
<p><span style="color: rgb(0,0,0);"><ac:image ac:width="1000"><ri:attachment ri:filename="image-2025-2-12_6-5-58.png" /></ac:image></span></p>
<p><span style="color: rgb(0,0,0);">После выбора файла появляется модальное окно с подтверждением типа импорта Идентификатор.</span></p>
<p><span style="color: rgb(0,0,0);"><ac:image ac:width="1200"><ri:attachment ri:filename="image-2025-2-12_6-8-44.png" /></ac:image></span></p>
<h2>Компонент bo-attribute</h2>
<table class="relative-table wrapped"><colgroup class=""><col class="" style="width: 21.9306%;" /><col class="" style="width: 78.0694%;" /></colgroup>
<tbody class="">
<tr class="">
<th><span style="color: rgb(0,0,0);">GIT repository</span></th>
<td style="text-align: left;"><a class="external-link" href="https://stash.sigma.sbrf.ru/projects/TAF_ARM/repos/bo-attribute/browse" rel="nofollow">https://stash.sigma.sbrf.ru/projects/TAF_ARM/repos/bo-attribute/browse</a></td></tr>
<tr class="">
<th><span style="color: rgb(0,0,0);">Ответственный за компонент</span></th>
<td><br /></td></tr>
<tr class="">
<th style="text-align: left;"><span style="color: rgb(0,0,0);">Ссылка на задачу</span></th>
<td style="text-align: left;"><br /></td></tr></tbody></table>
<p><br /></p>
<p>Дорабатывается экспорт элементов в CSV-файл с учетом следующих изменений в формате файла:</p>
<p>1) CSV-файл не должен содержать заголовков в структуре файла</p>
<p>2) СSV-файл имеет следующий порядок&nbsp; полей в строке:</p>
<ul class="alternate">
<li>Значение (VALUE)</li>
<li>Описание (DESCRIPTION)</li>
<li>Дата начала действия (TTLFROM)</li>
<li>Дата окончания действия(TTLTO)</li></ul>
<p>На стороне bo-attribute будут осуществляются валидация и контроль корректности записей. Значения полей value1 и value2 таблицы bfp-bo-attribute.list_items при условии заполнения value2 объединяются в первое поле строки csv-файла через дефис. Если value2 не заполнено, то первое поле строки csv-файла заполняется только значением из value1.</p>
<p><br /></p>
<p>Пример содержимого экспортируемого файла:</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="35cd207e-8a79-4d4c-a97f-41027b42a9d6"><ac:plain-text-body><![CDATA["84.222.222.222";"Какое-то_описание1";"20.09.2024 15:00";"23.09.2024 12:21"
"85.222.222.222-85.222.222.223";"Какое-то_описание2";"20.09.2024 15:01";"23.09.2024 12:22"
"2001:0db8:11a3:09d7:1f34:8a2e:0:0-2001:0db8:11a3:09d7:1f34:8a2e:07a0:765d";"";"20.09.2024 15:02";"23.09.2024 12:23"]]></ac:plain-text-body></ac:structured-macro>
<p><br /></p>
<p>3) При импорте через тип элемента Идентификатор, с фронта приходит флаг allowId, который позволяет загрузить значения без прохождения валидации на номер карты.</p>
<h3>Требования к программным&nbsp;интерфейсам</h3>
<p><a href="https://stash.sigma.sbrf.ru/projects/TAF_ARM/repos/openapi/pull-requests/175/overview">OpenAPI</a></p>
<p>В рамках существующих запросов добавляется флаг allowId:</p>
<table class="relative-table wrapped" style="width: 454.25px;"><colgroup class=""><col class="" style="width: 184.431px;" /><col class="" style="width: 79.6528px;" /><col class="" style="width: 189.278px;" /></colgroup>
<thead class="">
<tr class="">
<th style="text-align: left;">
<p>Параметр</p></th>
<th style="text-align: left;">
<p>Формат</p></th>
<th style="text-align: left;">
<p>Описание</p></th></tr></thead>
<tbody class="">
<tr class="">
<td style="text-align: left;">
<p>allowId</p></td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;">
<p>Признак отсутствия необходимости валидации&nbsp;на номер карты</p></td></tr></tbody></table>
<p><br /></p>
<p>Зависимость значения флагов от выбранной радио-кнопки:</p>
<table class="wrapped"><colgroup><col /><col /><col /></colgroup>
<tbody>
<tr>
<th scope="col">Кнопка</th>
<th scope="col">isDpan</th>
<th scope="col">allowId</th></tr>
<tr>
<td>Другое</td>
<td><span style="color: rgb(0,0,0);">false</span></td>
<td><span style="color: rgb(0,0,0);">false</span></td></tr>
<tr>
<td><span style="color: rgb(0,0,0);">Номер карты (PAN)</span></td>
<td><span style="color: rgb(0,0,0);">true</span></td>
<td><span style="color: rgb(0,0,0);">false</span></td></tr>
<tr>
<td><span style="color: rgb(0,0,0);">Идентификатор</span></td>
<td><span style="color: rgb(0,0,0);">false</span></td>
<td><span style="color: rgb(0,0,0);">true</span></td></tr></tbody></table>
<p><br /></p>
<p>4) Срок хранения элемента может задаваться двумя способами:</p>
<ul>
<li>В самом элементе при активации чекбокса Период действия;</li>
<li>Для всех элементов списка в карточке Параметры при активации чекбокса &quot;Автоматическое удаление элементов списка&quot; с указанием <span style="color: rgb(77,77,77);">Срока хранения элементов (в днях)</span></li></ul>
<p><span style="color: rgb(77,77,77);">По истечении на момент выгрузки заданного срока хранения элементов, элементы не передаются в экспортируемом файле(который формируется по кнопке Экспорт) . Но при этом продолжают храниться в БД</span></p>
<ol>
<li>Не экспортируем элементы у которых дата окончания закончилась на момент выгрузки</li>
<li>Если параметр <span style="color: rgb(77,77,77);">Срока хранения элементов (в днях)</span>&nbsp;<ins>заполнен</ins><span>&nbsp;</span>для списка, скрытие элементов выполняется по следующей логике:
<ul>
<li>Если для элемента указана дата&nbsp;<em>Окончания действия</em><span>&nbsp;</span>и она меньше рассчитанного срока хранения элемента (см. ниже), скрытие выполняется по наступлению даты<span>&nbsp;</span><em>Окончания действия</em>;</li>
<li>иначе, скрытие элемента выполняется по наступлению рассчитанного срока хранения элемента.
<ul>
<li>Рассчитанный срок хранения элемента определяется как&nbsp;
<ul>
<li><em>Начало действия + Срок хранения элементов (в днях) -</em>&nbsp;если для элемента определена дата&nbsp;<em>Начала действия</em>,&nbsp;<br />ИЛИ</li>
<li><em>Дата создания элемента + Срок хранения элементов</em>&nbsp;<em>-</em>&nbsp;если для элемента дата&nbsp;<em>Начала действия</em>&nbsp;не определена.</li></ul></li></ul></li></ul></li></ol>
<p><br /></p>
<h2>Компонент bo-list-import</h2>
<table class="relative-table wrapped"><colgroup class=""><col class="" style="width: 21.9306%;" /><col class="" style="width: 78.0694%;" /></colgroup>
<tbody class="">
<tr class="">
<th><span style="color: rgb(0,0,0);">GIT repository</span></th>
<td style="text-align: left;"><a class="external-link" href="https://stash.sigma.sbrf.ru/projects/TAF_ARM/repos/bo-attribute/browse" rel="nofollow">https://stash.sigma.sbrf.ru/projects/TAF_ARM/repos/bo-list-import/browse</a></td></tr>
<tr class="">
<th><span style="color: rgb(0,0,0);">Ответственный за компонент</span></th>
<td><br /></td></tr>
<tr class="">
<th style="text-align: left;"><span style="color: rgb(0,0,0);">Ссылка на задачу</span></th>
<td style="text-align: left;"><br /></td></tr></tbody></table>
<p><br /></p>
<p>Требуется доработка сервиса bo-list-import в части валидации импорта csv-файла и экспорта в csv-файл с исключением записи заголовков и добавлением проверок на возможные ошибки, которые будут отображаться в комментариях в файле ошибок (Ошибка 400,<ac:link ac:anchor="error"><ac:plain-text-link-body><![CDATA[ текст ошибок приведен выше в модуле bo-frontend ]]></ac:plain-text-link-body></ac:link> )</p>
<p><br /></p>
<h1><span class="nh-number" style="color: rgb(0,0,0);">Нефункциональные требования&nbsp;</span></h1>
<h2><span style="color: rgb(51,51,51);">Ролевая модель</span></h2>
<p><span style="color: rgb(51,51,51);">Отсутствуют изменения в существующей<span>&nbsp;</span></span><a href="https://confluence.sberbank.ru/pages/viewpage.action?pageId=11943413279">ролевой модели</a><span style="color: rgb(51,51,51);">. По-прежнему используются все те же объекты доступа в части работы пользователей с различными типами списков.</span></p>
<h2><span style="color: rgb(51,51,51);">Аудит</span></h2>
<p><span style="color: rgb(51,51,51);"><span style="color: rgb(0,0,0);"><span style="color: rgb(23,43,77);">Предусмотрено добавление нового параметра в&nbsp; метамодель<span>&nbsp;</span><a class="" href="https://confluence.sberbank.ru/display/NGOJZPXYAY/CI01099171_audit-event-transfer_1.0.21" rel="nofollow">CI01099171_audit-event-transfer_1.0.2</a><a href="https://confluence.sberbank.ru/display/NGOJZPXYAY/CI01099171_audit-event-transfer_1.0.25">5</a> . Планируется целевое решение в виде Справочника бинов.</span></span></span></p>
<table class="relative-table wrapped" style="width: 1105.0px;"><colgroup class=""><col class="" style="width: 247.0px;" /><col class="" style="width: 187.0px;" /><col class="" style="width: 260.0px;" /><col class="" style="width: 259.0px;" /><col class="" style="width: 220.0px;" /></colgroup>
<thead class="">
<tr class="">
<th class="highlight-#e3fcef" style="text-align: left;" data-highlight-colour="#e3fcef">
<p title="">Имя события</p></th>
<th class="highlight-#e3fcef" style="text-align: left;" data-highlight-colour="#e3fcef">
<p>Описание события</p></th>
<th class="highlight-#e3fcef" style="text-align: left;" data-highlight-colour="#e3fcef">
<p>Текущие параметры</p></th>
<th class="highlight-#e3fcef" style="text-align: left;" data-highlight-colour="#e3fcef">
<p>Требуемые параметры</p></th>
<th class="highlight-#e3fcef" style="text-align: left;" data-highlight-colour="#e3fcef">
<p>Аудируемый метод</p></th></tr></thead>
<tbody class="">
<tr class="">
<td style="text-align: left;"><span style="color: rgb(0,51,102);">csv_import_list_item_import</span></td>
<td style="text-align: left;">
<p class="p1"><span style="color: rgb(33,33,33);">Импорт элементов большого списка</span></p></td>
<td style="text-align: left;">
<p style="text-align: left;"><strong>params:</strong></p>
<p>filename -&nbsp;Название файла</p>
<p>fileSize -&nbsp;Размер импортируемого файла</p>
<p>listId -&nbsp;Идентификатор списка, в который происходит импорт</p>
<p>replaceAll -&nbsp;Заменять ли существующие элементы в списке</p>
<p>listMode -&nbsp;Тип списка</p>
<p>taskId -&nbsp;Идентификатор созданной задачи</p></td>
<td style="text-align: left;">
<p style="text-align: left;"><strong>params:</strong></p>
<p>filename -&nbsp;Название файла</p>
<p>fileSize -&nbsp;Размер импортируемого файла</p>
<p>listId -&nbsp;Идентификатор списка, в который происходит импорт</p>
<p>replaceAll -&nbsp;Заменять ли существующие элементы в списке</p>
<p>listMode -&nbsp;Тип списка</p>
<p>taskId -&nbsp;Идентификатор созданной задачи</p>
<p><strong>allowId - признак отсутствия необходимости валидации&nbsp; по номеру карты (радио-кнопка Идентификатор)</strong></p></td>
<td style="text-align: left;">
<pre><code>createImportListItemsTask</code></pre>
<p><code> /external/v1/list_items/import</code></p>
<p><span style="color: rgb(31,31,31);">POST</span></p></td></tr></tbody></table>
<h2><span style="color: rgb(51,51,51);">Логирование&nbsp;</span></h2>
<p><span style="color: rgb(51,51,51);">Доработки логирования осуществляются в задаче&nbsp;<a href="https://jira.delta.sbrf.ru/browse/WTF-783">https://jira.delta.sbrf.ru/browse/WTF-783</a></span></p>
<h2><span style="color: rgb(51,51,51);">Мониторинг</span></h2>
<p><span style="color: rgb(51,51,51);">Доработки мониторинга осуществляются в задаче <a href="https://jira.delta.sbrf.ru/browse/AFPE-2438" class="" rel="nofollow">https://jira.delta.sbrf.ru/browse/AFPE-2438</a></span></p>
<h2>Требования ИБ</h2>
<p>Требования информационной безопасности описаны на страницах: <a href="https://confluence.sberbank.ru/pages/viewpage.action?pageId=7502398610">Требования ИБ к OpenShift</a>,&nbsp;<a href="https://confluence.sberbank.ru/pages/viewpage.action?pageId=7502398623">Требования ИБ к Kafka</a></p>
<h2>Требования КБ</h2>
<table class="wrapped" style="text-align: left;">
<tbody class="">
<tr class="">
<td style="text-align: left;" colspan="3">
<p><strong>Требования кибербезопасности</strong></p></td></tr>
<tr class="">
<td style="text-align: left;">
<p><strong>#</strong></p></td>
<td style="text-align: left;">
<p><strong>Код требования</strong></p></td>
<td style="text-align: left;">
<p><strong>Описание требования</strong></p></td></tr>
<tr class="">
<td style="text-align: left;" colspan="3">
<p>Аудит</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>1</p></td>
<td style="text-align: left;">
<p>КБ-LGAM-001</p></td>
<td style="text-align: left;">
<p>АС/ФП должна быть интегрирована с централизованным сервисом аудита</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>2</p></td>
<td style="text-align: left;">
<p>КБ-LGAM-005</p></td>
<td style="text-align: left;">
<p>Событие аудита должно содержать следующий минимальный набор атрибутов:- дата и время события с точностью до секунд;- идентификатор АС (КЭ)- идентификатор пользователя;- идентификатор действия, которое привело к возникновению события;- наименование события;- результат (успешный/неуспешный);- старое и новое значение (для событий изменения объекта);- идентификатор (адрес) системного компонента (компьютера), используемого для доступа к системе.</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>КБ-LGAM-008</p></td>
<td style="text-align: left;">
<p>В случае недоступности централизованной системы аудита, АС должна обеспечить:- Сохранение событий аудита в локальном буфере- Целостность событий при хранении- Защиту событий от несанкционированного доступа- Перенос событий из буфера в централизованную систему, при восстановлении сервиса</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>4</p></td>
<td style="text-align: left;">
<p>КБ-LGAM-010</p></td>
<td style="text-align: left;">
<p>Возможность просмотра событий аудита должна предоставляться только аутентифицированному пользователю с минимально необходимыми правами для выполнения функциональных обязанностей</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>5</p></td>
<td style="text-align: left;">
<p>КБ-LGAM-013</p></td>
<td style="text-align: left;">
<p>Регистрация отдельных событий только составными частями АС, потенциально доступными нарушителю (например, АРМ пользователя, общедоступные веб-серверы), должна быть исключена</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>6</p></td>
<td style="text-align: left;">
<p>КБ-LGAM-016</p></td>
<td style="text-align: left;">
<p>Запрещена выгрузка в системы журналирования и мониторинга событий, содержащих данные категории К1/К2</p></td></tr>
<tr class="">
<td style="text-align: left;" colspan="3">
<p>Обеспечение защиты данных</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>7</p></td>
<td style="text-align: left;">
<p>КБ-DATA-001</p></td>
<td style="text-align: left;">
<p>Должен быть обеспечен контроль целостности и неизменности конфигурационных файлов, влияющих на механизмы безопасности и функциональность АС</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>8</p></td>
<td style="text-align: left;">
<p>КБ-DATA-002</p></td>
<td style="text-align: left;">
<p>Необходимо обеспечить конфиденциальность и целостность информации в зависимости от ее категории на всех этапах жизненного цикла информации, в рамках которых она обрабатывается в АС (хранение, передача в рамках ИВ, обработка со стороны пользователей, представление данных в UI, хранение в аудите и т.д.).</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>9</p></td>
<td style="text-align: left;">
<p>КБ-DATA-003</p></td>
<td style="text-align: left;">
<p>На непромышленных стендах данные должны быть обезличены в соответствии со стандартом обезличивания 4732 ч.2</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>10</p></td>
<td style="text-align: left;">
<p>КБ-DATA-014</p></td>
<td style="text-align: left;">
<p>В рамках интеграционных взаимодействий (ИВ) состав передаваемых данных между системами должен быть минимально необходимым и достаточным для выполнения бизнес-процесса.</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>11</p></td>
<td style="text-align: left;">
<p>КБ-DATA-016</p></td>
<td style="text-align: left;">
<p>Уведомления о событиях, формируемые АС в рамках бизнес-процесса, которые направляются сотруднику или клиенту Банка не должны содержать информации категории не допустимой к передаче в конкретном канале, например:- Корпоративная почта - не выше К2;- @900 - не выше К3.Дополнительные меры защиты (ЭП, шифрование, IRM и т.п.) должны быть проработаны в каждом конкретном случае отдельно.</p></td></tr>
<tr class="">
<td style="text-align: left;" colspan="3">
<p>Валидация</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>12</p></td>
<td style="text-align: left;">
<p>КБ-VALD-001</p></td>
<td style="text-align: left;">
<p>Передаваемые данные должны быть структурированы и типизированы. Формат передаваемых данных должен позволять осуществлять парсинг (разбор) данных на составные части для последующей валидации.</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>13</p></td>
<td style="text-align: left;">
<p>КБ-VALD-002</p></td>
<td style="text-align: left;">
<p>Сообщение должно проходить контроль на соответствие разрешенному формату и валидацию на соответствие содержимого и используемым символам.</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>14</p></td>
<td style="text-align: left;">
<p>КБ-VALD-003</p></td>
<td style="text-align: left;">
<p>Передача данных, не прошедших проверку корректности на каком-либо этапе, должна быть заблокирована.</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>15</p></td>
<td style="text-align: left;">
<p>КБ-VALD-006</p></td>
<td style="text-align: left;">
<p>Должна выполняться проверка корректности вводимых пользователем данных, причем не только на стороне клиента (с использованием сценариев, исполняемых веб-браузерам), но и на стороне сервера.</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>16</p></td>
<td style="text-align: left;">
<p>КБ-VALD-008</p></td>
<td style="text-align: left;">
<p>Вводимые пользователем через UI данные должны обрабатываться как текст, с обязательным маскированием/удалением в них HTML-тегов, запрещенных символов и т.д.</p></td></tr>
<tr class="">
<td style="text-align: left;" colspan="3">
<p>Управление секретами</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>17</p></td>
<td style="text-align: left;">
<p>КБ-SECM-001</p></td>
<td style="text-align: left;">
<p>Необходимо использовать решения класса SecretManagement для обеспечения процесса управления секретами в АС/ФП.</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>18</p></td>
<td style="text-align: left;">
<p>КБ-SECM-002</p></td>
<td style="text-align: left;">
<p>В случае невозможности интеграции с SecretManagement, необходимо обеспечить:- Безопасное хранение секретов, обеспечивающее защиту от несанкционированного доступа- Отзыв, удаление и ротацию секретов</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>19</p></td>
<td style="text-align: left;">
<p>КБ-SECM-003</p></td>
<td style="text-align: left;">
<p>На уровне приложения секреты не должны храниться или передаваться в открытом виде.</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>20</p></td>
<td style="text-align: left;">
<p>КБ-SECM-010</p></td>
<td style="text-align: left;">
<p>Запрещено хранение в программном коде каких-либо аутентификационных данных.</p></td></tr>
<tr class="">
<td style="text-align: left;" colspan="3">
<p>Безопасность контейнеризированных приложений</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>21</p></td>
<td style="text-align: left;">
<p>КБ-CONT-015</p></td>
<td style="text-align: left;">
<p>При размещении приложения внутри проекта должна быть реализована модель безопасности &quot;нулевого доверия&quot; (zero trust):- Для реализации сетевого взаимодействия между подами внутри одного проекта необходимо использовать сервисные прокси (envoy из состава SSM).- При обработке в проекте информации категории К1/К2 дополнительно все сетевые взаимодействия внутри проекта должны осуществляться с взаимной авторизацией, аутентификацией и шифрованием(mTls 1.2 + c вторым режимом) с использованием Service Mesh.</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>22</p></td>
<td style="text-align: left;">
<p>КБ-CONT-017</p></td>
<td style="text-align: left;">
<p>Все входящие запросы (в проект) должны проходить через Route(OS)/Ingress(K8s) и ingressgateway.Все исходящие запросы (из проекта) должны проходить через egressgateway. При этом для входящих/исходящих взаимодействий должен использоваться mTLS 1.2+.Внутри выделенного кластера Kubernetes можно взаимодействовать между проектами без петли через kind:Ingress.</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>23</p></td>
<td style="text-align: left;">
<p>КБ-CONT-011</p></td>
<td style="text-align: left;">
<p>Образ контейнера не должен содержать секреты (ключи, пароли, API токены, сертификаты).Для хранения секретов должно использоваться централизованное хранилище секретов (Secret Management).</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>24</p></td>
<td style="text-align: left;">
<p>КБ-CONT-036</p></td>
<td style="text-align: left;">
<p>Все зарегистрированные события безопасности должны передаваться в ПКБ (Платформа Кибербезопасности), как на уровне Платформы, так и на уровне приложения (касающиеся изменений сущностей проекта).</p></td></tr>
<tr class="">
<td style="text-align: left;" colspan="3">
<p>Аутентификация</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>25</p></td>
<td style="text-align: left;">
<p>КБ-AUTH-002</p></td>
<td style="text-align: left;">
<p>Взаимодействие пользователя с UI ФП/АС и взаимодействия ФП/АС должны осуществляться с применением протокола TLS 1.2 и выше</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>26</p></td>
<td style="text-align: left;">
<p>КБ-AUTH-027</p></td>
<td style="text-align: left;">
<p>АС\ФП должна проводить аутентификацию пользователей, являющихся работниками Банка, в СУДИР. При отсутствии интеграции с СУДИР следует использовать интегрированную доменную аутентификацию, управляемую администратором домена</p></td></tr>
<tr class="">
<td style="text-align: left;" colspan="3">
<p>Управление доступом</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>27</p></td>
<td style="text-align: left;">
<p>КБ-ACCM-001</p></td>
<td style="text-align: left;">
<p>Должна быть реализована ролевая модель ФП/АС</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>28</p></td>
<td style="text-align: left;">
<p>КБ-ACCM-002</p></td>
<td style="text-align: left;">
<p>Ролевая модель АС/ФП должна быть построена по принципу минимизации полномочий</p></td></tr>
<tr class="">
<td style="text-align: left;">
<p>29</p></td>
<td style="text-align: left;">
<p>КБ-ACCM-009</p></td>
<td style="text-align: left;">
<p>Пользователям любых категорий запрещено использовать технологические учетные записи (ТУЗ) для исполнения своих задач</p></td></tr></tbody></table></ac:rich-text-body></ac:structured-macro>