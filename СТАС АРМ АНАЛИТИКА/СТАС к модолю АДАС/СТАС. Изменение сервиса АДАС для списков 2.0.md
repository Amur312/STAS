<ac:structured-macro ac:name="details" ac:schema-version="1" ac:macro-id="2f95c83d-1e6b-4368-90b5-db706a83e058"><ac:parameter ac:name="id">requirements</ac:parameter><ac:rich-text-body>
<table class="relative-table wrapped" style="width: 89.006%;"><colgroup><col style="width: 21.9306%;" /><col style="width: 78.0694%;" /></colgroup>
<tbody>
<tr>
<th colspan="1"><span style="color: rgb(0,0,0);">Epic в JIRA продукта</span></th>
<td colspan="1"><ac:placeholder>указываем эпик в который входит задача</ac:placeholder></td></tr>
<tr>
<th colspan="1"><span style="color: rgb(0,0,0);">Ссылка на CR/STORY команды</span></th>
<td colspan="1">
<div class="content-wrapper">
<p><ac:structured-macro ac:name="jira" ac:schema-version="1" ac:macro-id="2775e349-2bf6-4bad-8864-b2ddd9587424"><ac:parameter ac:name="server">Jira SberWorks</ac:parameter><ac:parameter ac:name="serverId">611daf70-25e6-3844-a434-3583e234ac1b</ac:parameter><ac:parameter ac:name="key">UINAF-2655</ac:parameter></ac:structured-macro></p></div></td></tr>
<tr>
<th style="text-align: left;" colspan="1"><span style="color: rgb(0,0,0);">PO продукта&nbsp;</span></th>
<td style="text-align: left;" colspan="1"><ac:link><ri:user ri:userkey="8aa486275404583f015507210c46028c" /></ac:link></td></tr>
<tr>
<th style="text-align: left;" colspan="1"><span style="color: rgb(0,0,0);">Системный-аналитик&nbsp;</span></th>
<td style="text-align: left;" colspan="1">
<div class="content-wrapper">
<p><ac:link><ri:user ri:userkey="8aa489ae658a1a0e01658a4775190002" /></ac:link></p></div></td></tr>
<tr>
<th colspan="1">Статус согласования</th>
<td colspan="1">
<div class="content-wrapper">
<p><ac:structured-macro ac:name="pagestatus" ac:schema-version="1" ac:macro-id="78e6cbf4-f1c3-4d8e-a397-5be1651a0856" /></p></div></td></tr>
<tr>
<th colspan="1">БТ</th>
<td colspan="1"><ac:link><ri:page ri:content-title="Сервис АДАС. Изменение из-за Списков 2.0" /></ac:link></td></tr></tbody></table></ac:rich-text-body></ac:structured-macro>
<h1><br /><br /></h1><ac:structured-macro ac:name="numberedheadings" ac:schema-version="1" ac:macro-id="07a00a23-bb8d-41b3-afbc-c102f657467c"><ac:rich-text-body><ac:structured-macro ac:name="expand" ac:schema-version="1" ac:macro-id="eeade700-56fc-475e-93f0-218761db02b1"><ac:parameter ac:name="title">Оглавление</ac:parameter><ac:rich-text-body>
<p><ac:structured-macro ac:name="toc" ac:schema-version="1" ac:macro-id="06871eb8-97e9-4b83-ad76-e460bbc9d49c" /></p></ac:rich-text-body></ac:structured-macro><ac:structured-macro ac:name="expand" ac:schema-version="1" ac:macro-id="14e0ae5f-e72e-4984-abfc-9cc69a1fd0c0"><ac:parameter ac:name="title">История</ac:parameter><ac:rich-text-body>
<h1>Изменения</h1>
<table class="wrapped"><colgroup><col /><col /><col /></colgroup>
<tbody>
<tr>
<th>Дата</th>
<th>Описание</th>
<th>Автор</th></tr>
<tr>
<td>01.08.2023</td>
<td>Статья создана</td>
<td>
<div class="content-wrapper">
<p><ac:link><ri:user ri:userkey="8aa489ae658a1a0e01658a4775190002" /></ac:link></p></div></td></tr>
<tr>
<td>21.08.2023</td>
<td><span style="color: rgb(128,0,128);">Внесение изменений после корректировки API</span></td>
<td>
<div class="content-wrapper">
<p><ac:link><ri:user ri:userkey="8aa489ae658a1a0e01658a4775190002" /></ac:link></p></div></td></tr>
<tr>
<td><span style="color: rgb(0,0,255);">30.08.2023</span></td>
<td>
<p><span style="color: rgb(0,0,255);">Не корректируем метод, использующийся Ядром, т.к. для CaseManagement сделали новый.</span></p>
<p><span style="color: rgb(0,0,255);">Изменения в структуре таблицы в БД.</span></p></td>
<td><ac:link><ri:user ri:userkey="8aa489ae658a1a0e01658a4775190002" /></ac:link></td></tr>
<tr>
<td>01.09.2023</td>
<td>
<p><span style="color: rgb(255,0,0);">Скорректированы методы, вызываемые фронтом для поиска атрибутов, списков и правил для привязки к шаблону (будут использованы существующие методы из bo-analytic)</span></p></td>
<td><ac:link><ri:user ri:userkey="8aa489ae658a1a0e01658a4775190002" /></ac:link></td></tr>
<tr>
<td><span style="color: rgb(255,0,255);">08.09.2023</span></td>
<td><span style="color: rgb(255,0,255);">Внесены изменения по итогам реализации</span></td>
<td><ac:link><ri:user ri:userkey="8aa489ae658a1a0e01658a4775190002" /></ac:link></td></tr>
<tr>
<td><span style="color: rgb(128,0,0);">13.09.2023</span></td>
<td><span style="color: rgb(128,0,0);">Добавлено уточнение про удаление связей шаблона через модальное окно &quot;Атрибуты и Списки&quot;</span></td>
<td><ac:link><ri:user ri:userkey="8aa489ae658a1a0e01658a4775190002" /></ac:link></td></tr>
<tr>
<td><span style="color: rgb(0,128,0);">14.09.2023</span></td>
<td><span style="color: rgb(0,128,0);">Добавлены уточнения в Журнал АДАС по итогам реализации</span></td>
<td>
<div class="content-wrapper">
<p><ac:link><ri:user ri:userkey="8aa489ae658a1a0e01658a4775190002" /></ac:link></p></div></td></tr>
<tr>
<td><span style="color: rgb(153,51,0);">21.09.2023</span></td>
<td><span style="color: rgb(153,51,0);">Добавлены ограничения по удалению правил, привязанных к шаблону АДАС и подробно расписаны команды и условия передачи данных в Ядро.</span></td>
<td><ac:link><ri:user ri:userkey="8aa489ae658a1a0e01658a4775190002" /></ac:link></td></tr>
<tr>
<td><span style="color: rgb(0,128,128);">24.10.2023</span></td>
<td>
<p><span style="color: rgb(0,128,128);">Дописала сортировку в журнале для поля&nbsp;Время жизни атрибута в списке (в минутах), и гиперссылку на Списки 2.0. из карточки шаблона АДАС.</span></p>
<p><span style="color: rgb(0,128,128);">Внесла изменения в процесс удаления атрибутов\списков\правил, привязанных к шаблону АДАС.</span></p></td>
<td><ac:link><ri:user ri:userkey="8aa489ae658a1a0e01658a4775190002" /></ac:link></td></tr>
<tr>
<td><strong><span style="color: rgb(153,204,0);">25.10.2023</span></strong></td>
<td><strong><span style="color: rgb(153,204,0);">Добавила уточнения по количеству отправляемых в ядро сообщений для каждого случая обновления\удаления элемента шаблона АДАС</span></strong></td>
<td><ac:link><ri:user ri:userkey="8aa489ae658a1a0e01658a4775190002" /></ac:link></td></tr>
<tr>
<td>
<div class="content-wrapper">
<p><strong><span style="color: rgb(153,204,0);"><time datetime="2023-12-28" />&nbsp;<br /></span></strong></p></div></td>
<td>
<div class="content-wrapper">
<p><span style="color: rgb(0,0,0);">Скорректировано описание п.5.3.&nbsp;</span></p>
<p><span style="color: rgb(0,0,0);">Было:</span></p>
<p><span style="color: rgb(0,0,0);"><ac:image ac:height="93"><ri:attachment ri:filename="image-2023-12-28_16-7-52.png" /></ac:image></span></p>
<p><span style="color: rgb(0,0,0);">Стало:</span></p>
<p><span style="color: rgb(153,204,0);"><ac:image ac:height="72"><ri:attachment ri:filename="image-2023-12-28_16-8-26.png" /></ac:image></span></p></div></td>
<td>
<div class="content-wrapper">
<p><ac:link><ri:user ri:userkey="8aae6c9b8767c64801876a9fba970002" /></ac:link>&nbsp;</p></div></td></tr></tbody></table></ac:rich-text-body></ac:structured-macro>
<p><br /></p>
<h1>Глоссарий</h1>
<p><ac:placeholder>Необходимо указывать все термины и сокращения</ac:placeholder></p>
<table class="relative-table wrapped" style="width: 33.1453%;">
<thead style="text-decoration: none;">
<tr>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">Термин</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">Определение</p></th></tr></thead><colgroup style="text-decoration: none;"><col style="width: 30.1136%;" /><col style="width: 69.8864%;" /></colgroup>
<tbody style="text-decoration: none;">
<tr>
<td style="text-align: left;">АРМ</td>
<td style="text-align: left;">Автоматизированное рабочее место.</td></tr>
<tr>
<td colspan="1">Список&nbsp;</td>
<td colspan="1"><span style="color: rgb(23,43,77);text-decoration: none;">Множество значений, сгруппированных по какому-либо бизнес смыслу. Например, черный или белые списки</span></td></tr>
<tr>
<td colspan="1">АДАС</td>
<td colspan="1">Автоматическое добавление и удаление значений атрибутов транзакции в списки</td></tr></tbody></table>
<h1>Общие сведения</h1>
<h2>Описание доработки</h2>
<p>Ранее, при создании шаблона АДАС, пользователь указывал списки, в которые необходимо добавлять (или из которых необходимо удалять) элементы при сработке правила. Списки были привязаны к атрибутам, поэтому система Антифрод понимала, значение какого атрибута необходимо добавлять в список. В списках 2.0. пользователь указывает в них не сам атрибут, а сразу его значение.&nbsp; В связи с этим с новыми списками 2.0 шаблоны АДАС работать не будут - к выбранному списку не привязан по умолчанию атрибут.&nbsp;</p>
<p>Для корректной работы шаблонов АДАС необходимо сделать привязку атрибутов к спискам при создании шаблона АДАС.&nbsp;</p>
<p>В рамках доработки необходимо реализовать:</p>
<ul>
<li>Добавление в шаблон АДАС связки Атрибут - Список, ее редактирование и удаление;</li>
<li>Отображение в карточке шаблона АДАС журнала связей Атрибут - Список;</li>
<li>Доработать БД для хранения связей:
<ul>
<li>Шаблон АДАС - Атрибут - Список.&nbsp;</li></ul></li>
<li><span style="color: rgb(255,0,0);">Реализовать</span> интеграционное API для передачи дополнительных параметров (название, описание шаблона АДАС, название списка) в CaseManagement.</li></ul>
<p>Миграция данных из текущих шаблонов АДАС не предусмотрена, потребуется ручная настройка шаблонов пользователем.</p>
<p><ac:placeholder>Описываем какие изменения происходят в текущей архитектуре (если изменений нет - раздел удаляем)</ac:placeholder></p>
<h1>Список компонентов&nbsp;</h1>
<p>Дорабатывается bo-front, bo-control-action-list и bo-analytic.</p>
<h1>Функциональные требования</h1>
<p><ac:placeholder>Раздел содержит требования для каждого&nbsp;</ac:placeholder><ac:placeholder>нового или дорабытваемого&nbsp;</ac:placeholder><ac:placeholder>компонента&nbsp;&nbsp;</ac:placeholder></p>
<table class="relative-table wrapped" style="width: 44.6157%;"><colgroup><col style="width: 24.2978%;" /><col style="width: 40.3077%;" /><col style="width: 35.3813%;" /></colgroup>
<tbody>
<tr>
<th class="highlight-green" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">Компонент</th>
<td class="highlight-green" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green"><strong title="">bo-front</strong></td>
<td class="highlight-green" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green"><strong title="">bo-control-action-list</strong></td></tr>
<tr>
<th colspan="1"><span style="color: rgb(0,0,0);">GIT repository</span></th>
<td colspan="1"><ac:placeholder>указываем ссылку на репозиторий</ac:placeholder></td>
<td colspan="1"><br /></td></tr>
<tr>
<th colspan="1"><span style="color: rgb(0,0,0);">Ответственный за компонент</span></th>
<td colspan="1">
<div class="content-wrapper">
<p><ac:placeholder>указываем ответственного за компонент</ac:placeholder></p></div></td>
<td colspan="1"><br /></td></tr>
<tr>
<th style="text-align: left;" colspan="1"><span style="color: rgb(0,0,0);">Ссылка на задачу</span></th>
<td style="text-align: left;" colspan="1"><span style="color: rgb(112,112,112);"><span style="background-color: rgb(245,245,245);"><em>указываем ссылку на задачу в рамках которой разрабатывается/обновляется компонент</em></span></span></td>
<td colspan="1"><br /></td></tr></tbody></table>
<h2>Журнал&nbsp;Шаблоны автоматического добавления и удаления атрибутов</h2>
<h3>&nbsp;Изменение журнала &quot;Шаблоны автоматического добавления и удаления атрибутов&quot;</h3>
<p><s><span style="color: rgb(0,128,0);">Журнал шаблонов АДАС не изменяется: поля, счетчики, фильтрация остаются прежними.</span></s></p>
<p><span style="color: rgb(0,128,0);">Требуется внести изменения в журнал шаблонов АДАС:</span></p>
<ol>
<li>Необходимо внести изменения и запретить редактирование шаблона АДАС из Журнала - удалить из доступных действий кнопку редактирования (&quot;Карандаш&quot;). Удаление шаблона АДАС из Журнала по прежнему должно быть доступно.&nbsp; При необходимости редактирования шаблона пользователю необходимо зайти в <ac:link ac:anchor="Карточка Шаблона АДАС"><ac:plain-text-link-body><![CDATA[карточку шаблона]]></ac:plain-text-link-body></ac:link> и в ней редактировать каждый блок шаблона.</li>
<li><span style="color: rgb(0,128,0);">Изменить отображение данных в столбцах журнала:</span>
<ol>
<li><span style="color: rgb(0,128,0);">Использование в правилах</span>
<ol>
<li><span style="color: rgb(0,128,0);">Сделать счетчик с количеством привязанных правил к шаблону. Если к шаблону не привязано ни одного правила отображать в столбце прочерк. При нажатии на цифру отображать модальное окно с информацией о привязанных правилах со следующими полями:</span>
<ol>
<li><span style="color: rgb(0,128,0);">Название;</span></li>
<li><span style="color: rgb(0,128,0);">&nbsp;Действие;</span></li>
<li><span style="color: rgb(0,128,0);">Статус;</span></li>
<li><span style="color: rgb(0,128,0);">Дата изменения</span></li>
<li><span style="color: rgb(0,128,0);">Поле поиска по названию правила.</span>
<ol>
<li><span style="color: rgb(0,128,0);">Возможна сортировка по всем полям.&nbsp;</span></li></ol></li></ol></li></ol></li>
<li><span style="color: rgb(0,128,0);"><ac:inline-comment-marker ac:ref="c1a10215-66a4-49cd-8f85-9507852471d9">Время жизни</ac:inline-comment-marker> атрибута в списке (в минутах)</span>
<ol>
<li><span style="color: rgb(0,128,0);">Если с бэка возвращается значение&nbsp;list_template.attribute_ttl = null, то отображать значение &quot;бессрочно&quot;.&nbsp;</span></li>
<li><span style="color: rgb(0,128,128);">Необходимая сортировка: цифры, бессрочно, -. </span></li></ol></li></ol></li></ol>
<p><span style="color: rgb(0,128,0);">Макет Журнала &quot;Шаблоны автоматического <ac:inline-comment-marker ac:ref="7ae0b467-3efa-4121-970c-12c1d9b2aad7">добавления и удаления атрибутов&quot;</ac:inline-comment-marker></span></p>
<p><ac:image ac:width="1200"><ri:attachment ri:filename="журнал.JPG" /></ac:image></p>
<p><span style="color: rgb(0,128,0);">Макет модального окна &quot;Использование в правилах&quot;, вызываемого из журнала шаблонов АДАС</span></p>
<p><ac:image ac:width="600"><ri:attachment ri:filename="Снимок экрана 2023-09-14 в 15.55.35.png" /></ac:image></p>
<p><br /></p>
<h2>Создание Шаблона АДАС</h2>
<p>Макет пустого модального окна &quot;<ac:inline-comment-marker ac:ref="a0b9d58b-8435-4ab6-83fa-885b1ee6afd5"><ac:inline-comment-marker ac:ref="c7adb5ec-15ed-4c8f-af83-2a5f02b4e092">Создание шаблона</ac:inline-comment-marker>&quot;`</ac:inline-comment-marker></p>
<p><ac:image ac:height="250"><ri:attachment ri:filename="image2023-8-29_13-42-3.png" /></ac:image></p>
<p>Макет модального окна &quot;Создание шаблона&quot; при выборе действия &quot;Добавить&quot;</p>
<p><ac:image ac:width="500"><ri:attachment ri:filename="2023-08-09_14-43-59.png" /></ac:image></p>
<p><ac:image ac:width="500"><ri:attachment ri:filename="2023-08-09_14-43-25.png" /></ac:image></p>
<p>Макет&nbsp;модального окна &quot;Создание шаблона&quot; при выборе действия &quot;Удалить&quot;</p>
<p><ac:image ac:width="500"><ri:attachment ri:filename="2023-08-09_14-42-59.png" /></ac:image></p>
<p>Создание нового шаблона АДАС выполняется по кнопке &quot;Создать&quot; в журнале шаблонов АДАС, открывается модальное окно.</p>
<p>Описание модального окна &quot;Создание шаблона&quot;</p>
<table class="wrapped relative-table" style="width: 99.9406%;"><colgroup><col style="width: 2.25736%;" /><col style="width: 4.93274%;" /><col style="width: 10.4032%;" /><col style="width: 8.20266%;" /><col style="width: 7.7867%;" /><col style="width: 25.3852%;" /><col style="width: 8.26253%;" /><col style="width: 32.7632%;" /></colgroup>
<tbody>
<tr>
<th class="highlight-green" style="width: 2.25787%;" title="Цвет фона: Зеленый" data-highlight-colour="green">№</th>
<th class="highlight-green" style="width: 15.6269%;" title="Цвет фона: Зеленый" colspan="2" data-highlight-colour="green">Наименование</th>
<th class="highlight-green" style="width: 8.19964%;" title="Цвет фона: Зеленый" data-highlight-colour="green">Тип отображения</th>
<th class="highlight-green" style="width: 7.78372%;" title="Цвет фона: Зеленый" data-highlight-colour="green">Обязательность к заполнению</th>
<th class="highlight-green" style="width: 25.2525%;" title="Цвет фона: Зеленый" data-highlight-colour="green">Описание, проверка</th>
<th class="highlight-green" style="width: 8.25906%;" title="Цвет фона: Зеленый" data-highlight-colour="green">Источник данных</th>
<th class="highlight-green" style="width: 32.5609%;" title="Цвет фона: Зеленый" data-highlight-colour="green">Валидация на bo-front&nbsp; и bo-control-action-list</th></tr>
<tr>
<td style="width: 2.25787%;">1</td>
<td style="width: 5.28818%;">Название</td>
<td style="width: 10.3387%;"><br /></td>
<td style="width: 8.19964%;">Текстовое поле</td>
<td style="width: 7.78372%;">Да</td>
<td style="width: 25.2525%;">
<p>Название шаблона АДАС</p>
<ul>
<li>максимум 200 символов</li></ul></td>
<td style="width: 8.25906%;">Пользователь</td>
<td style="width: 32.5609%;">
<p style="text-align: left;"><u>При сохранении</u><span>&nbsp;</span>шаблона выполняется проверка на уникальность имени шаблона.&nbsp;</p>
<p style="text-align: left;">Если введенное название совпадает с названием существующего шаблона, то на экран выводится ошибка &quot;Сущность с таким именем уже существует&quot;.&nbsp;</p></td></tr>
<tr>
<td style="width: 2.25787%;">2</td>
<td style="width: 5.28818%;">Действие</td>
<td style="width: 10.3387%;"><br /></td>
<td style="width: 8.19964%;">Выпадающий список</td>
<td style="width: 7.78372%;">Да</td>
<td style="width: 25.2525%;">
<p>Выпадающий список со значениями: Добавить и Удалить.</p>
<p>Если выбрано &quot;Добавить&quot;, то в модальном окне появляются еще 2 строки:</p>
<ul>
<li>Время жизни атрибута в списке (в минутах)</li>
<li>Смещение старта времени жизни атрибута в списке (в минутах)</li></ul></td>
<td style="width: 8.25906%;"><span style="color: rgb(23,43,77);">Используются сохраненные допустимые значения</span></td>
<td style="width: 32.5609%;"><br /></td></tr>
<tr>
<td style="width: 2.25787%;">3</td>
<td style="width: 5.28818%;"><br /></td>
<td style="width: 10.3387%;">
<p>Время жизни атрибута в списке (в минутах)</p></td>
<td style="width: 8.19964%;">Текстовое поле</td>
<td style="width: 7.78372%;"><ac:inline-comment-marker ac:ref="f79859ac-4433-4174-9b67-7870d9f11b88">Нет</ac:inline-comment-marker></td>
<td style="width: 25.2525%;"><ac:inline-comment-marker ac:ref="e3ee92da-d973-4b10-8499-0d80a1226434">Доступен ввод только целочисленных значений</ac:inline-comment-marker></td>
<td style="width: 8.25906%;">Пользователь</td>
<td>При вводе символов, отличных от цифр, подсвечивать поле красным цветом.</td></tr>
<tr>
<td style="width: 2.25787%;">4</td>
<td style="width: 5.28818%;"><br /></td>
<td style="width: 10.3387%;">Смещение старта времени жизни атрибута в списке (в минутах)</td>
<td style="width: 8.19964%;">Текстовое поле</td>
<td style="width: 7.78372%;"><ac:inline-comment-marker ac:ref="8e726e42-69c8-427c-be7f-c4f39dca9905">Нет</ac:inline-comment-marker></td>
<td style="width: 25.2525%;"><ac:inline-comment-marker ac:ref="9219d5b4-a269-4b0c-b1bd-8401b6fc1888">Доступен ввод только целочисленных значений</ac:inline-comment-marker></td>
<td style="width: 8.25906%;">Пользователь</td>
<td>При вводе символов, отличных от цифр, подсвечивать поле красным цветом.</td></tr>
<tr>
<td style="width: 2.25787%;">5</td>
<td style="width: 5.28818%;">Сохранить и создать новый</td>
<td style="width: 10.3387%;"><br /></td>
<td style="width: 8.19964%;">Кнопка</td>
<td style="width: 7.78372%;"><br /></td>
<td style="width: 25.2525%;">
<p>При нажатии на кнопку сохраняются введенные пользователем параметры списка в таблицу&nbsp;bo-control-action-list.list_template,</p>
<p>и отображается пустое модальное окно &quot;Создать шаблон&quot;.</p></td>
<td style="width: 8.25906%;"><br /></td>
<td>Кнопка неактивна при незаполненных обязательных полях на странице.&nbsp;</td></tr>
<tr>
<td style="width: 2.25787%;">6</td>
<td style="width: 5.28818%;">Создать</td>
<td style="width: 10.3387%;"><br /></td>
<td style="width: 8.19964%;">Кнопка</td>
<td style="width: 7.78372%;"><br /></td>
<td style="width: 25.2525%;">
<p><span style="color: rgb(23,43,77);">При нажатии на кнопку сохраняются введенные пользователем параметры списка в таблицу&nbsp;bo-control-action-list.list_template</span></p>
<p><br /></p></td>
<td style="width: 8.25906%;"><br /></td>
<td>Кнопка неактивна при незаполненных обязательных полях на странице.&nbsp;</td></tr>
<tr>
<td style="width: 2.25787%;">7</td>
<td style="text-align: left;width: 5.28818%;">Отменить</td>
<td style="text-align: left;width: 10.3387%;"><br /></td>
<td style="width: 8.19964%;">Кнопка</td>
<td style="width: 7.78372%;"><br /></td>
<td style="width: 25.2525%;">
<p>При нажатии на кнопку модальное окно закрывается, данные не сохраняются</p>
<p>Кнопка активна всегда</p></td>
<td style="width: 8.25906%;"><br /></td>
<td style="width: 32.5609%;"><br /></td></tr></tbody></table>
<h2><ac:structured-macro ac:name="anchor" ac:schema-version="1" ac:macro-id="a3268695-1e2b-4279-a4c1-047da54a8224"><ac:parameter ac:name="">Карточка Шаблона АДАС</ac:parameter></ac:structured-macro>Карточка Шаблона АДАС&nbsp;<ac:structured-macro ac:name="anchor" ac:schema-version="1" ac:macro-id="1a421d4d-de1b-4306-a932-62a71cb51247"><ac:parameter ac:name="">5.3.</ac:parameter></ac:structured-macro></h2>
<p><ac:inline-comment-marker ac:ref="05fb4f18-46ea-48b0-8820-ee386b1f9326">Макет пустой карточки &quot;Шаблон АДАС&quot;</ac:inline-comment-marker></p>
<p><ac:image ac:width="1200"><ri:attachment ri:filename="2023-10-17_12-32-38.png" /></ac:image></p>
<p>Макет заполненной карточки &quot;<ac:inline-comment-marker ac:ref="077212e2-8f01-42ac-9735-d96b24f8bf88">Шаблон АДАС&quot;</ac:inline-comment-marker></p>
<p><ac:image ac:width="1200"><ri:attachment ri:filename="Снимок.JPG" /></ac:image></p>
<p>Описание карточки Шаблона АДАС</p>
<table class="wrapped" style="width: 1562.0px;"><colgroup><col /><col /><col /><col /></colgroup>
<tbody>
<tr>
<th class="highlight-green" style="width: 38.0px;" title="Цвет фона: Зеленый" data-highlight-colour="green">№</th>
<th class="highlight-green" style="width: 434.0px;" title="Цвет фона: Зеленый" data-highlight-colour="green">Наименование</th>
<th class="highlight-green" style="width: 142.0px;" title="Цвет фона: Зеленый" data-highlight-colour="green">Тип отображения</th>
<th class="highlight-green" style="width: 948.0px;" title="Цвет фона: Зеленый" data-highlight-colour="green">Описание, проверка</th></tr>
<tr>
<td style="width: 38.0px;"><br /></td>
<td style="width: 1524.0px;" colspan="3"><strong>Раздел &quot;Параметры&quot;</strong></td></tr>
<tr>
<td style="width: 38.0px;">1</td>
<td style="width: 434.0px;">Название</td>
<td style="width: 142.0px;">Текстовое поле</td>
<td style="width: 948.0px;"><span style="color: rgb(23,43,77);">list_template.name</span></td></tr>
<tr>
<td style="width: 38.0px;">2</td>
<td style="width: 434.0px;">Описание</td>
<td style="width: 142.0px;">Текстовое поле</td>
<td style="width: 948.0px;"><span style="color: rgb(23,43,77);">list_template.description</span></td></tr>
<tr>
<td style="width: 38.0px;">3</td>
<td style="width: 434.0px;">Действие</td>
<td style="width: 142.0px;">Текстовое поле</td>
<td style="width: 948.0px;"><span style="color: rgb(23,43,77);">list_template.action</span></td></tr>
<tr>
<td style="width: 38.0px;">4</td>
<td style="width: 434.0px;">Время жизни атрибута в списке (в минутах)</td>
<td style="width: 142.0px;">Текстовое поле</td>
<td style="width: 948.0px;">
<p><span style="color: rgb(23,43,77);">list_template.attribute_ttl. </span></p>
<p><span style="color: rgb(23,43,77);">Если пользователь не заполнял поле в модальном окне &quot;Создания шаблона&quot;, то в карточке отображается значение в зависимости от выбранного действия:</span></p>
<ul>
<li><span style="color: rgb(23,43,77);">&quot;Добавить&quot; - отображается &quot;бессрочно&quot;;</span></li>
<li><span style="color: rgb(23,43,77);">&quot;Удалить&quot; - отображается прочерк.</span></li></ul></td></tr>
<tr>
<td style="width: 38.0px;">5</td>
<td style="width: 434.0px;">Смещение старта времени жизни атрибута в списке (в минутах)</td>
<td style="width: 142.0px;">Текстовое поле</td>
<td style="width: 948.0px;">
<p><span style="color: rgb(23,43,77);">list_template.ttl_shift</span></p>
<p><span style="color: rgb(23,43,77);">Если пользователь не заполнял поле в модальном окне &quot;Создания шаблона&quot;, то в карточке отображается значение в зависимости от выбранного действия:</span></p>
<ul>
<li><span style="color: rgb(23,43,77);">&quot;Добавить&quot; - отображается &quot;без смещения&quot;;</span></li>
<li><span style="color: rgb(23,43,77);">&quot;Удалить&quot; - отображается прочерк.</span></li></ul></td></tr>
<tr>
<td style="width: 38.0px;">6</td>
<td style="width: 434.0px;">Кнопка &quot;Карандаш&quot;</td>
<td style="width: 142.0px;">Кнопка</td>
<td style="width: 948.0px;">Кнопка для перехода на модальное окно &quot;<ac:link ac:anchor="Параметры" />&quot;</td></tr>
<tr>
<td style="width: 38.0px;"><br /></td>
<td style="width: 1524.0px;" colspan="3">
<p><strong>Раздел &quot;Атрибуты и списки&quot;</strong></p>
<p>Раздел представляет собой древовидную структуру хранения связей Атрибутов со списками.</p>
<p>Рядом с названием раздела указывается счетчик - количество атрибутов, привязанных к шаблону АДАС.&nbsp;</p>
<p><br /></p>
<p>Журнал связей &quot;Атрибуты и Списки&quot; представляет из себя папки атрибутов, привязанных к шаблону, с раскрывающимся перечнем списков, привязанных к каждому атрибуту.&nbsp;</p>
<p><span style="color: rgb(255,0,255);">При просмотре карточки папки отображаются в закрытом виде. Чтобы увидеть привязанные списки необходимо развернуть папку. <span style="color: rgb(0,128,128);">Названия списков - гиперссылка для перехожу в карточку Списка 2.0. в режиме просмотра.</span></span></p>
<p>Рядом с названием атрибута есть счетчик с количеством привязанных к нему списков.&nbsp;</p>
<p><span style="color: rgb(102,102,153);">В данном разделе не предусмотрена сортировка по полям.</span></p></td></tr>
<tr>
<td style="width: 38.0px;">1</td>
<td style="width: 434.0px;">Чекбокс</td>
<td style="width: 142.0px;">Чекбокс</td>
<td style="width: 948.0px;">Чекбокс для выбора Атрибутов и/или списков.</td></tr>
<tr>
<td style="width: 38.0px;">2</td>
<td style="width: 434.0px;">Название</td>
<td style="width: 142.0px;">Текстовое поле</td>
<td style="width: 948.0px;">
<p>В поле указывается название атрибута, привязанного к шаблону&nbsp;</p>
<p>и уровнем ниже перечислены названия списков, привязанных к конкретному атрибуту (<span style="color: rgb(23,43,77);">list_template_attribute_lists</span>)</p></td></tr>
<tr>
<td style="width: 38.0px;">3</td>
<td style="width: 434.0px;">Описание</td>
<td style="width: 142.0px;">Текстовое поле</td>
<td style="width: 948.0px;">По ID списка из таблицы <span style="color: rgb(23,43,77);">list_template_attribute_lists&nbsp;</span>необходимо отображать значение поля <span style="color: rgb(23,43,77);">description из схемы&nbsp;bo-analytic.list</span></td></tr>
<tr>
<td style="width: 38.0px;">4</td>
<td style="width: 434.0px;">Тип списка</td>
<td style="width: 142.0px;">Текстовое поле</td>
<td style="width: 948.0px;">Схема bo-analytic таблица lists.type</td></tr>
<tr>
<td style="width: 38.0px;">5</td>
<td>Поиск</td>
<td>Текстовое поле</td>
<td>
<p>Поле со строкой поиска по &quot;названию&quot; атрибута и/или списка&nbsp;(like).</p>
<p><span style="color: rgb(255,0,255);">Если введенный пользователем текст совпадает с:</span></p>
<ul>
<li><span style="color: rgb(255,0,255);">названием атрибута, то</span>
<ul>
<li><span style="color: rgb(255,0,255);">отображается закрытая папка с названием найденного Атрибута в закрытом виде, внутри которой весь перечень привязанных списков.</span></li></ul></li>
<li><span style="color: rgb(255,0,255);">названием списка, то</span>
<ul>
<li><span style="color: rgb(255,0,255);">отображается закрытая папка с названием атрибута, при ее раскрытии виден только список, название которого искал пользователь.&nbsp;</span></li></ul></li>
<li><span style="color: rgb(255,0,255);">названием списка и атрибута одновременно, то</span>
<ul>
<li><span style="color: rgb(255,0,255);">отображается закрытая папка с названием найденного атрибута, <ac:inline-comment-marker ac:ref="47594501-9ab1-4704-9674-e704e47a1864">при ее раскрытии виден <span style="color: rgb(23,43,77);">весь перечень привязанных списков</span></ac:inline-comment-marker>.&nbsp;</span></li></ul></li>
<li><span style="color: rgb(255,0,255);">нет совпадений со списком или атрибутом, то</span>
<ul>
<li><span style="color: rgb(255,0,255);">отображается пустая таблица.</span></li></ul></li></ul></td></tr>
<tr>
<td colspan="1">6</td>
<td colspan="1">Кнопка + (добавить)</td>
<td colspan="1">Кнопка</td>
<td colspan="1">
<p>При нажатии осуществляется переход в модальное окно <ac:link ac:anchor="Создание связи"><ac:plain-text-link-body><![CDATA["Атрибуты и списки"]]></ac:plain-text-link-body></ac:link> для создания новой или редактирования существующих связей.</p>
<p><span style="color: rgb(153,51,0);">В модальном окне всегда отображаются все связи Атрибут-Список, независимо от того осущесвлял ли пользователь фильтрацию атрибутов\списков через &quot;Поиск&quot;.&nbsp;</span></p></td></tr>
<tr>
<td colspan="1">7</td>
<td colspan="1">Боковое меню</td>
<td colspan="1">Меню действий</td>
<td colspan="1">
<p>Для строки с атрибутом доступно 2 действия:</p>
<ul>
<li>редактировать - проваливаемся в&nbsp;модальное окно &quot;Атрибуты и списки&quot; для <ac:link ac:anchor="Редактирование связи"><ac:plain-text-link-body><![CDATA[редактирования связей]]></ac:plain-text-link-body></ac:link>;</li>
<li>удалить - <ac:link ac:anchor="Удаление связи"><ac:plain-text-link-body><![CDATA[удаление связи]]></ac:plain-text-link-body></ac:link> атрибута с шаблоном</li></ul>
<p>Для строки списка доступно 1 действие:</p>
<ul>
<li>удалить -<ac:link ac:anchor="Удаление связи"><ac:plain-text-link-body><![CDATA[ удаление связи]]></ac:plain-text-link-body></ac:link> атрибута с выбранным списком с подтверждением удаления.</li></ul></td></tr>
<tr>
<td colspan="1"><br /></td>
<td colspan="3">
<p><strong>Раздел &quot;Использование в правилах&quot;</strong></p>
<p>Функционал не меняется, добавляется 1 проверка, описанная в <ac:link ac:anchor="Использование в правилах"><ac:plain-text-link-body><![CDATA[разделе 5.7.]]></ac:plain-text-link-body></ac:link></p></td></tr></tbody></table>
<p><br /></p>
<p><br /></p>
<p>Макет поиска в разделе &quot;Атрибуты и Списки&quot; по названию списка и/<ac:inline-comment-marker ac:ref="c7a2d195-2e3a-4f9b-94f1-7d7fdc32de6b">или атрибута</ac:inline-comment-marker></p>
<p><ac:image ac:width="1200"><ri:attachment ri:filename="2023-10-17_12-37-30.png" /></ac:image></p>
<p><br /></p>
<p><ac:structured-macro ac:name="anchor" ac:schema-version="1" ac:macro-id="5cdb5b5d-4d65-4152-ab85-176f18bf3df2"><ac:parameter ac:name="">Параметры</ac:parameter></ac:structured-macro>Макет редактирования <ac:inline-comment-marker ac:ref="ea0f9814-bf11-49b4-9505-648c572182cb">блока &quot;<ac:inline-comment-marker ac:ref="d8ee4209-d54f-4473-ad92-1509a2419e4a">Параметры</ac:inline-comment-marker>&quot;</ac:inline-comment-marker>&nbsp;</p>
<p><ac:image ac:width="400"><ri:attachment ri:filename="редактирование параметров.JPG" /></ac:image></p>
<p>Описание модального окна &quot;Параметры&quot;</p>
<table class="relative-table wrapped"><colgroup><col style="width: 45.0px;" /><col style="width: 100.0px;" /><col style="width: 208.0px;" /><col style="width: 164.0px;" /><col style="width: 156.0px;" /><col /><col style="width: 508.0px;" /><col style="width: 165.0px;" /><col style="width: 655.0px;" /></colgroup>
<tbody>
<tr>
<th class="highlight-green" style="width: 2.25787%;" title="Цвет фона: Зеленый" data-highlight-colour="green">№</th>
<th class="highlight-green" style="width: 15.3892%;" title="Цвет фона: Зеленый" colspan="2" data-highlight-colour="green">Наименование</th>
<th class="highlight-green" style="width: 8.19964%;" title="Цвет фона: Зеленый" data-highlight-colour="green">Тип отображения</th>
<th class="highlight-green" style="width: 7.78372%;" title="Цвет фона: Зеленый" data-highlight-colour="green">Обязательность к заполнению</th>
<th class="highlight-green" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">Возможность и условия редактирования</th>
<th class="highlight-green" style="width: 25.3714%;" title="Цвет фона: Зеленый" data-highlight-colour="green">Описание, проверка</th>
<th class="highlight-green" style="width: 8.25906%;" title="Цвет фона: Зеленый" data-highlight-colour="green">Источник данных</th>
<th class="highlight-green" style="width: 32.7392%;" title="Цвет фона: Зеленый" data-highlight-colour="green">Валидация на bo-front&nbsp; и bo-control-action-list</th></tr>
<tr>
<td style="width: 2.25787%;">1</td>
<td style="width: 4.99109%;">Название</td>
<td style="width: 10.3981%;"><br /></td>
<td style="width: 8.19964%;">Текстовое поле</td>
<td style="width: 7.78372%;">Да</td>
<td colspan="1">Да, доступно всегда</td>
<td style="width: 25.3714%;">
<p>Название шаблона АДАС</p>
<ul>
<li>максимум 200 символов</li></ul></td>
<td style="width: 8.25906%;">Пользователь</td>
<td style="width: 32.7392%;">
<p style="text-align: left;"><u>При сохранении</u><span>&nbsp;</span>шаблона выполняется проверка на уникальность имени шаблона.&nbsp;</p>
<p style="text-align: left;">Если введенное название совпадает с названием существующего шаблона, то на экран выводится ошибка &quot;Сущность с таким именем уже существует&quot;.&nbsp;</p></td></tr>
<tr>
<td colspan="1">2</td>
<td colspan="1">Описание</td>
<td colspan="1"><br /></td>
<td colspan="1">Текстовое поле</td>
<td colspan="1">Нет</td>
<td colspan="1">Да, доступно всегда</td>
<td colspan="1">
<p>Описание шаблона АДАС можно заполнить только при редактировании шаблона (не при создании)</p>
<ul>
<li>максимум 200 символов,</li></ul></td>
<td colspan="1">Пользователь</td>
<td colspan="1"><br /></td></tr>
<tr>
<td style="width: 2.25787%;">3</td>
<td style="width: 4.99109%;">Действие</td>
<td style="width: 10.3981%;"><br /></td>
<td style="width: 8.19964%;">Выпадающий список</td>
<td style="width: 7.78372%;">Да</td>
<td colspan="1">Да, доступно всегда</td>
<td style="width: 25.3714%;">
<p>Выпадающий список со значениями: Добавить и Удалить.</p>
<p>Если выбрано &quot;Добавить&quot;, то в модальном окне появляются еще 2 строки:</p>
<ul>
<li>Время жизни атрибута в списке (в минутах)</li>
<li>Смещение старта времени жизни атрибута в списке (в минутах)</li></ul></td>
<td style="width: 8.25906%;"><span style="color: rgb(23,43,77);">Используются сохраненные допустимые значения</span></td>
<td style="width: 32.7392%;"><br /></td></tr>
<tr>
<td style="width: 2.25787%;">4</td>
<td style="width: 4.99109%;"><br /></td>
<td style="width: 10.3981%;">
<p>Время жизни атрибута в списке (в минутах)</p></td>
<td style="width: 8.19964%;">Текстовое поле</td>
<td style="width: 7.78372%;">Нет</td>
<td colspan="1">Да, доступно всегда</td>
<td style="width: 25.3714%;"><ac:inline-comment-marker ac:ref="b608b081-3939-4d50-b1e7-99cdee64fc31">Доступен ввод только целочисленных значений</ac:inline-comment-marker></td>
<td style="width: 8.25906%;">Пользователь</td>
<td style="width: 32.7392%;">При вводе символов, отличных от цифр, подсвечивать поле красным цветом.</td></tr>
<tr>
<td style="width: 2.25787%;">5</td>
<td style="width: 4.99109%;"><br /></td>
<td style="width: 10.3981%;">Смещение старта времени жизни атрибута в списке (в минутах)</td>
<td style="width: 8.19964%;">Текстовое поле</td>
<td style="width: 7.78372%;">Нет</td>
<td colspan="1">Да, доступно всегда</td>
<td style="width: 25.3714%;">Доступен ввод только целочисленных значений</td>
<td style="width: 8.25906%;">Пользователь</td>
<td style="width: 32.7392%;">При вводе символов, отличных от цифр, подсвечивать поле красным цветом.</td></tr>
<tr>
<td style="width: 2.25787%;">6</td>
<td style="width: 4.99109%;">Сохранить</td>
<td style="width: 10.3981%;"><br /></td>
<td style="width: 8.19964%;">Кнопка</td>
<td style="width: 7.78372%;"><br /></td>
<td colspan="1"><br /></td>
<td style="width: 25.3714%;">
<p><span style="color: rgb(23,43,77);">При нажатии на кнопку сохраняются введенные пользователем параметры списка в таблицу&nbsp;bo-control-action-list.list_template</span></p>
<p><br /></p></td>
<td style="width: 8.25906%;"><br /></td>
<td style="width: 32.7392%;">Кнопка неактивна при незаполненных обязательных полях на странице.&nbsp;</td></tr>
<tr>
<td style="width: 2.25787%;">7</td>
<td style="text-align: left;width: 4.99109%;">Отменить</td>
<td style="text-align: left;width: 10.3981%;"><br /></td>
<td style="width: 8.19964%;">Кнопка</td>
<td style="width: 7.78372%;"><br /></td>
<td colspan="1"><br /></td>
<td style="width: 25.3714%;">
<p>При нажатии на кнопку модальное окно закрывается, данные не сохраняются</p>
<p>Кнопка активна всегда</p></td>
<td style="width: 8.25906%;"><br /></td>
<td style="width: 32.7392%;"><br /></td></tr></tbody></table>
<p><br /></p>
<p>При обновлении шаблона АДАС используется текущий&nbsp;OperationId:</p>
<table class="relative-table wrapped" style="width: 75.9066%;"><colgroup><col style="width: 10.5903%;" /><col style="width: 19.0116%;" /><col style="width: 35.7205%;" /><col style="width: 6.44531%;" /><col style="width: 28.2244%;" /></colgroup>
<thead>
<tr>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Компонент</p></th>
<th class="highlight-green" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">OperationId</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">Описание</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Тип API</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">Что делаем</p></th></tr></thead>
<tbody>
<tr>
<td style="text-align: left;" colspan="1"><span style="color: rgb(23,43,77);">bo-control-action-list</span></td>
<td colspan="1">controlActionListEControllerSave</td>
<td style="text-align: left;" colspan="1">Обновление параметров (<span style="color: rgb(23,43,77);">action, attributeTTL,<span style="color: rgb(0,51,102);">ttlShift)</span></span>&nbsp;шаблона, привязанного к правилу&nbsp;</td>
<td style="text-align: left;" colspan="1">Внешнее</td>
<td style="text-align: left;" colspan="1">
<p>Существующий метод, <span style="color: rgb(128,0,128);">обновляется</span></p>
<p><span style="color: rgb(23,43,77);">Записать команду UPDATE по каждому отредактированному шаблону АДАС, привязанному к правилу, в таблицу&nbsp;state_commands</span></p>
<p><span style="color: rgb(23,43,77);"><span style="color: rgb(153,51,0);"><span style="color: rgb(153,204,0);">количество сообщений = количеству привязанных правил к шаблону</span></span></span></p></td></tr></tbody></table>
<p><br /></p>
<p><strong>Интеграция с Ядром</strong></p>
<p>При изменении параметров шаблона АДАС, к которому привязано правило, необходимо отправлять команду UPDATE в Ядро (<em>текущий функционал, не меняется в рамках доработки</em>):</p>
<table class="wrapped relative-table" style="width: 83.5289%;"><colgroup><col style="width: 9.65978%;" /><col style="width: 15.2695%;" /><col style="width: 16.9401%;" /><col style="width: 9.96833%;" /><col style="width: 20.7804%;" /><col style="width: 27.3727%;" /></colgroup>
<thead>
<tr>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Компонент</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">message</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">Описание</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Тип API</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Переменная окружения</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Пример команды</p></th></tr></thead>
<tbody>
<tr>
<td style="text-align: left;" colspan="1">
<p><span style="color: rgb(23,43,77);">bo-control-action-list</span></p></td>
<td style="text-align: left;" colspan="1">updateListSettingsCommand</td>
<td style="text-align: left;" colspan="1">
<p>Обновление шаблона, привязанного к правилу</p>
<p><br /></p>
<p><br /></p>
<p><br /></p></td>
<td style="text-align: left;" colspan="1">Интеграционное</td>
<td style="text-align: left;" colspan="1">
<p><ac:inline-comment-marker ac:ref="e198a5de-ba85-4155-a6ba-1eb3410ce282">KAFKA_TOPIC_UPDATE_LIST_TEMPLATE</ac:inline-comment-marker></p>
<p>(значение по умолчанию отсутствует</p></td>
<td style="text-align: left;" colspan="1">
<div class="content-wrapper"><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="3d75abbd-2fbc-43e4-aebb-f6378ff5f39a"><ac:parameter ac:name="language">js</ac:parameter><ac:parameter ac:name="theme">Emacs</ac:parameter><ac:plain-text-body><![CDATA[{
  "kind": "update",
  "ruleId": "efb3fd24-ddd5-47c2-be58-68b725936ddb",
  "listSettingsTemplateMetadata": {
    "id": "7f12ac1f-3d21-4491-899c-e3789b427dc5",
    "lists": [
       {"id": "07d74672-e8fb-49f3-ba79-41a5fd707c6b",
        "attributeName": "Канал"
       },
       {"id": "f0aae6ab-1514-41fd-bdbd-cf55fd0cc143",
        "attributeName": "Сумма платежа"
       }
     ]
    "action": "ADD",
    "attributeTTL": "120",
    "ttlShift": "0"
  }
}]]></ac:plain-text-body></ac:structured-macro>
<p><br /></p>
<p><br /></p></div></td></tr></tbody></table>
<p><br /></p>
<h2><ac:structured-macro ac:name="anchor" ac:schema-version="1" ac:macro-id="1e493402-a3d9-4ea8-a9e7-9740fb4a5028"><ac:parameter ac:name="">Создание связи</ac:parameter></ac:structured-macro>Добавление связи Атрибуты и Списки</h2>
<p>Макет пустого модального окна &quot;Атрибуты и Списки&quot;</p>
<p><ac:image ac:height="200"><ri:attachment ri:filename="2023-08-07_08-48-21.png" /></ac:image></p>
<p>Макет &quot;Поиск Атрибута по названию&quot;</p>
<p><ac:image ac:width="462"><ri:attachment ri:filename="image2023-8-29_13-46-2.png" /></ac:image></p>
<p><ac:inline-comment-marker ac:ref="0e41c09b-0c8f-4eb3-939f-01d6808cecff">Макет &quot;Выбор списков&quot;</ac:inline-comment-marker></p>
<p><ac:image ac:width="1200"><ri:attachment ri:filename="Actions_lists_empty-1.png" /></ac:image></p>
<p>Макет &quot;Выбор списков мультиселектом&quot;</p>
<p><ac:image ac:width="1200"><ri:attachment ri:filename="Actions_two connections-2.png" /></ac:image></p>
<p><br /></p>
<p>Макет заполненного модального окна &quot;Атрибуты и Списки&quot;</p>
<p><ac:image ac:height="198"><ri:attachment ri:filename="2023-08-03_13-08-41.png" /></ac:image></p>
<p>Макет &quot;Добавление новой связи на модальном окне&quot;</p>
<p><ac:image ac:height="250"><ri:attachment ri:filename="2023-08-03_13-09-44.png" /></ac:image></p>
<p>Макет &quot;Копирование ранее созданной связи на модальном окне&quot;</p>
<p><ac:image ac:height="250"><ri:attachment ri:filename="2023-08-03_13-10-21.png" /></ac:image></p>
<p>Макет &quot;Недоступность копирования при незаполненной связи&quot;</p>
<p><ac:image ac:width="400"><ri:attachment ri:filename="image2023-7-26_19-38-0.png" /></ac:image></p>
<p><ac:structured-macro ac:name="anchor" ac:schema-version="1" ac:macro-id="12a53fec-732f-4158-841c-1cd9bfcea852"><ac:parameter ac:name="">Описание&nbsp;модального окна &quot;Атрибуты и Списки&quot;</ac:parameter></ac:structured-macro>Описание&nbsp;модального окна &quot;Атрибуты и Списки&quot;</p>
<table class="wrapped relative-table" style="width: 94.0224%;"><colgroup><col style="width: 2.0164%;" /><col style="width: 6.60146%;" /><col style="width: 12.1058%;" /><col style="width: 6.95551%;" /><col style="width: 41.7303%;" /><col style="width: 7.06154%;" /><col style="width: 23.5228%;" /></colgroup>
<tbody>
<tr>
<th class="highlight-green" title="Цвет фона: Зеленый" data-highlight-colour="green">№</th>
<th class="highlight-green" title="Цвет фона: Зеленый" data-highlight-colour="green">Наименование</th>
<th class="highlight-green" title="Цвет фона: Зеленый" data-highlight-colour="green">Тип отображения</th>
<th class="highlight-green" title="Цвет фона: Зеленый" data-highlight-colour="green">Обязательность к заполнению</th>
<th class="highlight-green" title="Цвет фона: Зеленый" data-highlight-colour="green">Описание, проверка</th>
<th class="highlight-green" title="Цвет фона: Зеленый" data-highlight-colour="green">Источник данных</th>
<th class="highlight-green" title="Цвет фона: Зеленый" data-highlight-colour="green">Валидация на bo-front&nbsp; и bo-control-action-list</th></tr>
<tr>
<td colspan="1">1</td>
<td colspan="1">Атрибут</td>
<td colspan="1">Выпадающий список</td>
<td colspan="1">Да</td>
<td colspan="1">
<p>Список атрибутов из bo-analytic.attribute, отфильтрованный по типу String <span style="color: rgb(128,0,128);">и введенные в эксплуатацию (attribute.state=true)</span></p>
<p>Доступно к выбору только 1 значение в 1 строке.&nbsp;</p>
<p>Необходимо реализовать &quot;ленивую подгрузку&quot; атрибутов для поиска атрибута по наименованию.</p>
<p>К 1 <ac:inline-comment-marker ac:ref="aec27b0a-eed0-4fc0-91d6-e0e3778f1903">шаблону</ac:inline-comment-marker> АДАС можно привязать неограниченное число уникальных Атрибутов.</p></td>
<td colspan="1">Пользователь</td>
<td colspan="1">Если поле не заполнено, кнопка &quot;Сохранить&quot; не доступна.</td></tr>
<tr>
<td colspan="1">2</td>
<td colspan="1">Список</td>
<td colspan="1">Выпадающий список с мультиселектом</td>
<td colspan="1">Да</td>
<td colspan="1">
<p>Перечень списков 2.0., которые можно привязать к атрибуту.&nbsp;</p>
<p>Доступны списки из&nbsp;<span style="color: rgb(23,43,77);">bo-analytic.lists с типом String и без признака &quot;Автосинхронизации&quot;.&nbsp;</span></p>
<p>Для выбора также используется чекбокс с возможностью массового выбора.</p>
<p>У пользователя есть возможность поиска списка по названию с автокомплитом.</p>
<p>После выбора списков в поле отображаются их названия через запятую и счетчик кол-ва списков.&nbsp;</p></td>
<td colspan="1">Пользователь</td>
<td colspan="1">Если поле не заполнено, кнопка &quot;Сохранить&quot; не доступна.</td></tr>
<tr>
<td colspan="1">3</td>
<td colspan="1">Боковое меню</td>
<td colspan="1">Меню действий</td>
<td colspan="1"><br /></td>
<td colspan="1">
<p>Пользователю доступны 3 действия:</p></td>
<td colspan="1">Пользователь</td>
<td colspan="1"><br /></td></tr>
<tr>
<td colspan="1"><br /></td>
<td colspan="1"><br /></td>
<td colspan="1">
<p>+&nbsp;</p>
<p><ac:inline-comment-marker ac:ref="9f23997c-e063-4926-8abc-32d715221769">Кнопка &quot;Добавить&quot;</ac:inline-comment-marker></p></td>
<td colspan="1"><br /></td>
<td colspan="1">
<p>Кнопка &quot;Добавить новую связь Атрибут - Список&quot; отображается знаком +. При ее нажатии ниже<s>, сразу под строкой, на которой было выбрано действие,</s> добавляется новая пустая строка для выбора атрибута и списков.</p></td>
<td colspan="1"><br /></td>
<td colspan="1">
<p>В новой созданной строке пользователю доступны:</p>
<ul>
<li>Атрибуты, не привязанные к данному шаблону.
<ul>
<li>На фронте проверять, какие атрибуты уже используются в строках выше и ниже (даже на этапе создания первых связок Шаблон - Атрибут - Список) и не отображать ранее выбранные атрибуты в выпадающем списке доступных атрибутов. Нужно делать проверку на фронте, так как при первом добавлении нескольких атрибутов к шаблону информация в бэк уйдет только после сохранения.</li>
<li>На бэке проверять, что выбранный атрибут не привязан к шаблону и не дублируется в запросе на привязку к шаблону (если в запросе добавляется единовременно несколько связок Шаблон - Атрибут - Список). Если атрибут используется или дублируется в связях, то не добавлять такие связи к шаблону.&nbsp;</li></ul></li>
<li>Списки - все типа String (вне зависимости от их привязки к атрибуту).</li></ul></td></tr>
<tr>
<td colspan="1"><br /></td>
<td colspan="1"><br /></td>
<td colspan="1">Кнопка &quot;Копировать&quot;</td>
<td colspan="1"><br /></td>
<td colspan="1">
<p>Кнопка &quot;Копировать текущую связь Атрибут-Список&quot; <ac:inline-comment-marker ac:ref="419ad434-3635-4583-9cb1-7b2a95529d0f">отображается</ac:inline-comment-marker> только на строке, где заполнена связь &quot;Атрибут - Список&quot;.&nbsp;</p>
<p><ac:inline-comment-marker ac:ref="5efcb0be-5f2e-4a29-a1f6-3a65f8fe5f46">При нажатии на кнопку ниже, стразу под этой строкой</ac:inline-comment-marker>, появляется новая строка с пустым полем &quot;Атрибут&quot; и заполненным полем &quot;Список&quot;. Перечень списков в новой строке соответствуют перечню список из скопированной строки связи.&nbsp;</p>
<p>При раскрытии выдающего списка поля &quot;Список&quot; напротив скопированных наименований стоят чекбоксы. Выпадающий список не заблокирован и пользователь может откорректировать перечень списков - выбрать новые списки или снять чекбоксы с отмеченных списков.&nbsp;</p></td>
<td colspan="1"><br /></td>
<td colspan="1">
<p>В новой созданной строке пользователю доступны:</p>
<ul>
<li>Атрибуты, не привязанные к данному шаблону.
<ul>
<li>На фронте проверять, какие атрибуты уже используются в строках выше и ниже (даже на этапе создания первых связок Шаблон - Атрибут - Список) и не отображать ранее выбранные атрибуты в выпадающем списке доступных атрибутов. Нужно делать проверку на фронте, так как при первом добавлении нескольких атрибутов к шаблону информация в бэк уйдет только после сохранения.</li>
<li>На бэке проверять, что выбранный атрибут не привязан к шаблону и не дублируется в запросе на привязку к шаблону (если в запросе добавляется единовременно несколько связок Шаблон - Атрибут - Список). Если атрибут используется или дублируется в связях, то не добавлять такие связи к шаблону.&nbsp;</li></ul></li>
<li>Списки - все типа String (вне зависимости от их привязки к атрибуту).</li></ul></td></tr>
<tr>
<td colspan="1"><br /></td>
<td colspan="1"><br /></td>
<td colspan="1">Кнопка &quot;Удалить&quot;</td>
<td colspan="1"><br /></td>
<td colspan="1">
<p>Кнопка &quot;Удалить текущую связь Атрибут - Список&quot; доступна всегда:</p>
<ul>
<li>для заполненной связи Атрибут - Список;</li>
<li>для новой <span style="color: rgb(128,0,0);">не единственной в окне</span> строки (пользователь мог случайно ее добавить);</li>
<li>для скопированной строки, где заполнены только списки.</li></ul>
<p>Пользователю доступно удаление единственной связи Атрибут-Список привязанной к шаблону.</p>
<p><span style="color: rgb(128,0,0);">*Через модальное окно нет возможности удалить <ac:inline-comment-marker ac:ref="a8b53f15-1ad9-4f23-a9f9-7cccc9e6b443">единственную связь</ac:inline-comment-marker> Атрибут - Список. Сделать это можно только через Карточку шаблона.&nbsp;</span></p></td>
<td colspan="1"><br /></td>
<td colspan="1"><br /></td></tr>
<tr>
<td colspan="1">4</td>
<td colspan="1">Сохранить</td>
<td colspan="1">Кнопка</td>
<td colspan="1"><br /></td>
<td colspan="1">
<p><span style="color: rgb(23,43,77);">При нажатии на кнопку сохраняются введенные пользователем связи Атрибут-Список в таблицу&nbsp;list_template_attribute_lists.</span></p></td>
<td colspan="1"><br /></td>
<td colspan="1">
<div class="content-wrapper">
<p>Кнопка доступна только если в<ac:inline-comment-marker ac:ref="be666261-59c7-4782-b723-a08fe85db4b1">о</ac:inline-comment-marker> всех добавленных строках в модальном окне заполнены значения &quot;Атрибут и &quot;Список&quot;, иначе - не активна.&nbsp;</p>
<p><br /></p>
<p><ac:inline-comment-marker ac:ref="02a6a7c2-ef15-4044-8cbe-7f7c6aee553c">При сохранении</ac:inline-comment-marker>&nbsp;на бэке реализовать проверку&nbsp;существуют ли выбранные списки, иначе - при нажатии кнопки &quot;Сохранить&quot; закрывать модальное окно и в правом нижнем углу выводить сообщение &quot;Ошибка валидации&quot; с идентификаторами удаленных списков.</p>
<p><br /></p>
<p><br /></p></div></td></tr>
<tr>
<td colspan="1">5</td>
<td colspan="1">Отмена</td>
<td colspan="1">Кнопка</td>
<td colspan="1"><br /></td>
<td colspan="1">
<p>При нажатии на кнопку модальное окно закрывается, данные не сохраняются</p>
<p>Кнопка активна всегда</p></td>
<td colspan="1"><br /></td>
<td colspan="1"><br /></td></tr></tbody></table>
<p><br /></p>
<p>Для создания связи Шаблон - Атрибут - Список (фактически, это обновление Шаблона АДАС) необходимо использовать текущий operationId:</p>
<table class="wrapped relative-table" style="width: 64.578%;"><colgroup><col style="width: 7.80914%;" /><col /><col style="width: 17.2443%;" /><col style="width: 29.4629%;" /><col style="width: 6.80346%;" /><col style="width: 38.6711%;" /></colgroup>
<thead>
<tr>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Компонент</p></th>
<th class="highlight-green" colspan="1" data-highlight-colour="green"><br /></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">OperationId</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">Описание</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Тип API</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">Что делаем</p></th></tr></thead>
<tbody>
<tr>
<td colspan="1">
<p><s>bo-control-action-list</s></p>
<p><span style="color: rgb(255,0,0);">bo-analytic/ attribute</span></p></td>
<td colspan="1">
<p><br /></p><span style="color: rgb(255,0,0);">/external/v2/attribute/list</span></td>
<td colspan="1">
<p><s>controlActionListEControllerGetAttributes</s></p><span style="color: rgb(255,0,0);">getAttributeCorePage</span></td>
<td colspan="1">Поиск атрибутов, доступных для привязки к текущему шаблону АДАС</td>
<td colspan="1">Внешнее</td>
<td colspan="1">
<p><s><em>Новый метод.</em></s></p>
<p><s>Поиск атрибутов, доступных для привязки к текущему шаблону АДАС:</s></p>
<ul>
<li><s>атрибуты типа String</s></li>
<li><s>атрибут еще не привязан к данному шаблону АДАС</s></li>
<li><s><span style="color: rgb(128,0,128);">атрибут введен в эксплуатацию (attribute.state=true)</span></s></li></ul>
<p><span style="color: rgb(255,0,0);">Существующий метод</span></p></td></tr>
<tr>
<td colspan="1">
<p><s>bo-control-action-list</s></p>
<p><span style="color: rgb(255,0,0);">bo-analytic/list</span></p></td>
<td colspan="1">
<p><br /></p>
<p><span style="color: rgb(255,0,0);">/external/v2/list/findAll</span></p></td>
<td colspan="1">
<p><s>controlActionListEControllerGetList</s></p><span style="color: rgb(255,0,0);">getListPage</span></td>
<td colspan="1">Поиск списков, доступных для привязки к Атрибуту в Шаблоне АДАС</td>
<td colspan="1">Внешнее</td>
<td colspan="1">
<p><s><em>Измененный метод.</em></s></p>
<p><s>Поиск списков, доступных для привязки:</s></p>
<ul>
<li><s>списки типа String</s></li>
<li><s>без признака Автосинхронизации</s></li></ul>
<p><span style="color: rgb(255,0,0);">Существующий метод</span></p></td></tr>
<tr>
<td colspan="1">bo-control-action-list</td>
<td colspan="1">/external/v1/control-action-list/{id}</td>
<td colspan="1">controlActionListEControllerSave</td>
<td colspan="1">Обновить текущий шаблон АДАС связями Атрибут - Список</td>
<td colspan="1">Внешнее</td>
<td colspan="1">
<p><em><ac:inline-comment-marker ac:ref="6c159d5e-7c3f-4bd1-849d-470760abf9ab">Существующий</ac:inline-comment-marker> метод, <span style="color: rgb(128,0,128);">обновляется</span></em></p>
<p>Добавление Атрибута к шаблону<span style="color: rgb(153,51,0);">, у которого есть хоть 1 связь с правилом:</span></p>
<ul>
<li>добавить новую запись в&nbsp;list_template_attribute_lists.</li></ul>
<p><span style="color: rgb(23,43,77);">Записать команду UPDATE по каждому отредактированному шаблону АДАС, привязанному к правилу, в таблицу&nbsp;state_commands</span></p>
<p><span style="color: rgb(23,43,77);"><span style="color: rgb(153,51,0);"><span style="color: rgb(153,204,0);">количество сообщений = количеству привязанных правил к шаблону</span></span></span></p></td></tr></tbody></table>
<p><strong>Интеграция с Ядром</strong></p>
<p>(<em>текущий функционал, не меняется в рамках доработки</em>)</p>
<table class="relative-table wrapped" style="width: 74.9584%;"><colgroup><col style="width: 10.0546%;" /><col style="width: 13.284%;" /><col style="width: 18.7074%;" /><col style="width: 8.65974%;" /><col style="width: 18.6519%;" /><col style="width: 30.6347%;" /></colgroup>
<thead>
<tr>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Компонент</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">message</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">Описание</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Тип API</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Переменная окружения</p></th>
<th class="highlight-green" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">Пример команды</th></tr></thead>
<tbody>
<tr>
<td style="text-align: left;" colspan="1">
<p><span style="color: rgb(23,43,77);">bo-control-action-list</span></p></td>
<td colspan="1">updateListSettingsCommand</td>
<td style="text-align: left;" colspan="1">
<p>Обновление шаблона, привязанного к правилу</p>
<p>Создание первой связи Атрибут-Список у шаблона, привязанного к правилу</p>
<p><br /></p>
<p><br /></p></td>
<td style="text-align: left;" colspan="1">Интеграционное</td>
<td colspan="1">
<p>KAFKA_TOPIC_UPDATE_LIST_TEMPLATE</p>
<p>(значение по умолчанию отсутствует</p>
<p>)</p></td>
<td colspan="1">
<div class="content-wrapper"><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="caa397f5-29bf-4659-ab1f-952becc474ec"><ac:parameter ac:name="language">js</ac:parameter><ac:parameter ac:name="theme">Emacs</ac:parameter><ac:plain-text-body><![CDATA[{
  "kind": "update",
  "ruleId": "efb3fd24-ddd5-47c2-be58-68b725936ddb",
  "listSettingsTemplateMetadata": {
    "id": "7f12ac1f-3d21-4491-899c-e3789b427dc5",
    "lists": [
       {"id": "07d74672-e8fb-49f3-ba79-41a5fd707c6b",
        "attributeName": "Канал"
       },
       {"id": "f0aae6ab-1514-41fd-bdbd-cf55fd0cc143",
        "attributeName": "Сумма платежа"
       }
     ]
    "action": "ADD",
    "attributeTTL": "120",
    "ttlShift": "0"
  }
}]]></ac:plain-text-body></ac:structured-macro>
<p><br /></p>
<p><br /></p></div></td></tr></tbody></table>
<h2><ac:structured-macro ac:name="anchor" ac:schema-version="1" ac:macro-id="9ec6c559-6556-464e-a95f-b87f486263d7"><ac:parameter ac:name="">Редактирование связи</ac:parameter></ac:structured-macro>Редактирование связи Атрибуты и Списки</h2>
<p>Макет редактирования связи через раздел &quot;Атрибуты и Списки&quot; из ка<ac:inline-comment-marker ac:ref="469d1317-caa2-497c-b4df-701bb774d38e">рточки шаблона АДАС</ac:inline-comment-marker></p>
<p><ac:image ac:width="1200"><ri:attachment ri:filename="2023-10-17_12-34-38.png" /></ac:image></p>
<p>Макет модального окна &quot;Атрибуты и Списки&quot; <ac:inline-comment-marker ac:ref="768a651a-c621-44d4-860a-3e7a28cd6345">открытого на редактирование</ac:inline-comment-marker></p>
<p><ac:image ac:height="250"><ri:attachment ri:filename="Снимок2.JPG" /></ac:image></p>
<p><br /></p>
<p>Поля модального окна &quot;Атрибуты и Списки&quot;, открытого на редактирование, и проверки, выполняемые при сохранении связи аналогичны описанным выше в таблице <ac:link ac:anchor="Описание&nbsp;модального окна &quot;Атрибуты и Списки&quot;"><ac:plain-text-link-body><![CDATA["Описание модального окна "Атрибуты и Списки""]]></ac:plain-text-link-body></ac:link>. Отличие лишь в том, что модальное окно открывается заполненными значениями связей Атрибут-Список, привязанным к данному шаблону АДАС.</p>
<p>Для редактирования связи Атрибут - Список у шаблона АДАС использовать следующие operationId:</p>
<table class="relative-table wrapped" style="width: 63.53%;"><colgroup><col style="width: 12.7342%;" /><col /><col style="width: 17.529%;" /><col style="width: 32.937%;" /><col style="width: 6.28794%;" /><col style="width: 30.5034%;" /></colgroup>
<thead>
<tr>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Компонент</p></th>
<th class="highlight-green" colspan="1" data-highlight-colour="green">Endpoint</th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">OperationId</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">Описание</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Тип API</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">Что делаем</p></th></tr></thead>
<tbody>
<tr>
<td colspan="1">
<p><s><span style="color: rgb(23,43,77);">bo-control-action-list</span></s></p>
<p><span style="color: rgb(23,43,77);"><span style="color: rgb(255,0,0);">bo-analytic / attribute</span></span></p></td>
<td colspan="1"><span style="color: rgb(255,0,0);">/external/v2/attribute/list</span></td>
<td colspan="1">
<p><s>controlActionListEControllerGetAttributes</s></p>
<p><span style="color: rgb(255,0,0);">getAttributeCorePage</span></p></td>
<td colspan="1">Поиск&nbsp;атрибутов, доступных для привязки к текущему шаблону АДАС</td>
<td colspan="1">Внешнее</td>
<td colspan="1">
<p><s><em>Новый метод.</em></s></p>
<p><s>Поиск атрибутов, доступных для привязки к текущему шаблону АДАС:</s></p>
<ul>
<li><s>атрибуты типа String</s></li>
<li><s><span style="color: rgb(128,0,128);">атрибут введен в эксплуатацию (attribute.state=true)</span></s></li>
<li><s>атрибут еще не привязан к данному шаблону АДАС</s></li></ul>
<p><span style="color: rgb(255,0,0);">Существующий метод</span></p></td></tr>
<tr>
<td colspan="1">
<p><s><span style="color: rgb(23,43,77);">bo-control-action-list</span></s></p>
<p><span style="color: rgb(23,43,77);"><span style="color: rgb(255,0,0);">bo-analytic /</span></span><span style="color: rgb(23,43,77);"><span style="color: rgb(255,0,0);">list</span></span></p></td>
<td colspan="1">
<p><span style="color: rgb(255,0,0);">/external/v2/list/findAll</span></p>
<p><br /></p></td>
<td colspan="1">controlActionListEControllerGetList</td>
<td colspan="1">Фильтрация списков, доступных для привязки к Атрибуту</td>
<td colspan="1">Внешнее</td>
<td colspan="1">
<p><s><em>Измененный метод.</em></s></p>
<p><s>Поиск списков, доступных для привязки:</s></p>
<ul>
<li><s>списки типа String</s></li>
<li><s>без признака Автосинхронизации</s></li></ul>
<p><span style="color: rgb(255,0,0);">Существующий метод</span></p></td></tr>
<tr>
<td style="text-align: left;" colspan="1"><span style="color: rgb(23,43,77);">bo-control-action-list</span></td>
<td colspan="1"><br /></td>
<td style="text-align: left;" colspan="1">controlActionListEControllerSave</td>
<td style="text-align: left;" colspan="1">
<p>Обновление шаблона АДАС</p>
<p>Редактирование связи у текущего шаблона Атрибут - Список</p></td>
<td style="text-align: left;" colspan="1">Внешнее</td>
<td style="text-align: left;" colspan="1">
<p><em>Существующий метод, <span style="color: rgb(128,0,128);">обновляется</span></em></p>
<p>Замена атрибута в связи Атрибут-список:</p>
<ul>
<li>удалить запись со старым Атрибутом, добавить запись с новым Атрибутом и отмеченными списками в таблицу&nbsp;list_template_attribute_lists</li></ul>
<p>Замена списка в текущей связи Атрибут - Список (сняли чекбокс с 1 списка, проставили на другом):</p>
<ul>
<li>в связи Шаблон - Атрибут в таблице&nbsp;list_template_attribute_lists <span style="color: rgb(0,128,0);"><s>скорректировать id списка в массиве списков.</s> удалить запись со старым&nbsp;list_id, добавить запись с новым&nbsp;list_id.</span></li></ul>
<p><span style="color: rgb(153,51,0);">Если в шаблону АДАС привязано хоть 1 правило, то:</span></p>
<ul>
<li>Записать&nbsp;<span style="color: rgb(23,43,77);">команду UPDATE по каждому отредактированному шаблону АДАС в таблицу&nbsp;state_commands</span></li>
<li><span style="color: rgb(23,43,77);"><span style="color: rgb(153,51,0);"><span style="color: rgb(153,204,0);">количество сообщений = количеству привязанных правил к шаблону</span></span></span></li></ul>
<p><span style="color: rgb(153,51,0);">Если редактировался шаблон без привязанного правила, то&nbsp;</span></p>
<ul>
<li><span style="color: rgb(153,51,0);">команду в таблицу&nbsp;state_commands не записывать. </span></li></ul></td></tr></tbody></table>
<p><br /></p>
<p><strong>Интеграция с Ядром</strong></p>
<p>(<em>текущий функционал, не меняется в рамках доработки</em>)</p>
<table class="relative-table wrapped" style="width: 74.9584%;"><colgroup><col style="width: 10.0546%;" /><col style="width: 13.284%;" /><col style="width: 18.7086%;" /><col style="width: 8.65974%;" /><col style="width: 18.6496%;" /><col style="width: 30.6358%;" /></colgroup>
<thead>
<tr>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Компонент</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">message</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">Описание</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Тип API</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Переменная окружения</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Пример команды</p></th></tr></thead>
<tbody>
<tr>
<td style="text-align: left;" colspan="1">
<p><span style="color: rgb(23,43,77);">bo-control-action-list</span></p>
<p><br /></p></td>
<td colspan="1">updateListSettingsCommand</td>
<td style="text-align: left;" colspan="1">
<p>Обновление шаблона, привязанного к правилу</p>
<p>Редактировании связи Атрибут-Список у шаблона, привязанного к правилу</p>
<p><br /></p>
<p><br /></p></td>
<td style="text-align: left;" colspan="1">Интеграционное</td>
<td colspan="1">
<p>KAFKA_TOPIC_UPDATE_LIST_TEMPLATE</p>
<p>(значение по умолчанию отсутствует</p></td>
<td style="text-align: left;" colspan="1">
<div class="content-wrapper"><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="18c9acad-0fe2-45fd-9116-df83fb348da7"><ac:parameter ac:name="language">js</ac:parameter><ac:parameter ac:name="theme">Emacs</ac:parameter><ac:plain-text-body><![CDATA[{
  "kind": "update",
  "ruleId": "efb3fd24-ddd5-47c2-be58-68b725936ddb",
  "listSettingsTemplateMetadata": {
    "id": "7f12ac1f-3d21-4491-899c-e3789b427dc5",
    "lists": [
       {"id": "07d74672-e8fb-49f3-ba79-41a5fd707c6b",
        "attributeName": "Канал"
       },
       {"id": "f0aae6ab-1514-41fd-bdbd-cf55fd0cc143",
        "attributeName": "Сумма платежа"
       }
     ]
    "action": "ADD",
    "attributeTTL": "120",
    "ttlShift": "0"
  }
}]]></ac:plain-text-body></ac:structured-macro>
<p><br /></p><br />
<p><br /></p></div></td></tr></tbody></table>
<h2><ac:structured-macro ac:name="anchor" ac:schema-version="1" ac:macro-id="e14a2667-f0ee-4bdd-9e8b-7902cb1d5067"><ac:parameter ac:name="">Удаление связи</ac:parameter></ac:structured-macro>Удаление связи Атрибуты и Списки</h2>
<p>Удаление связей Шаблона с Атрибутом и Атрибута со Списками возможно следующими способами:</p>
<ol>
<li>Удаление Атрибута в разделе &quot;Атрибуты и Списки&quot; в карточке шаблона АДАС.
<ol>
<li>Через <ac:link ac:anchor="Удаление через боковую панель"><ac:plain-text-link-body><![CDATA[боковую панель]]></ac:plain-text-link-body></ac:link> напротив выбранного атрибута при нажатии на значок &quot;Корзина&quot;. Удаление доступно для всех атрибутов, независимо от их количества в шаблоне АДАС. При нажатии на кнопку в действиях возникает сообщение-подтверждение &quot;Удалить группу&quot; и &quot;Х&quot; (отменить). При нажатии на &quot;Корзину&quot; удаляется связь Шаблона с Атрибутом и привязанными списками (list_template_attribute_lists). При нажатии&nbsp;&quot;Отменить&quot;&nbsp; - возврат к карточке шаблона АДАС,</li>
<li>Выбор <ac:link ac:anchor="Удаление через чекбокс Атрибуты"><ac:plain-text-link-body><![CDATA[чекбокса ]]></ac:plain-text-link-body></ac:link>с наименованием удаляемого атрибута. При проставлении галки чекбоксы проставляются также на всех списках, привязанных к атрибуту. Внизу раздела &quot;Атрибуты и Списки&quot; появляется панелька, на которой показано количество выбранных атрибутов и кнопка &quot;Удалить&quot;. При нажатии на &quot;Удалить&quot;, возникает строка-подтверждение с кнопками &quot;Удалить&quot; и &quot;Отмена&quot;. При нажатии на &quot;Удалить&quot; удаляется связь&nbsp;Шаблона с Атрибутом и привязанными списками (list_template_attribute_lists).</li></ol></li>
<li>Удаление связи Атрибут-Список в <ac:link ac:anchor="Удаление из модального окна"><ac:plain-text-link-body><![CDATA[модальном окне]]></ac:plain-text-link-body></ac:link> &quot;Атрибуты и Списки&quot;, открытом на редактирование.&nbsp;
<ol>
<li>Удаление Атрибута из шаблона и его связи со списками возможно через &quot;действия - удалить&quot;.&nbsp;При нажатии на &quot;Корзина&quot; и затем кнопку &quot;Сохранить&quot; удаляется связь&nbsp;Шаблона с Атрибутом и привязанными списками (list_template_attribute_lists).</li>
<li>Удаление Списка из связи Атрибут-Список возможно через снятие чекбокса с удаляемого списка. При нажатии на кнопку &quot;Сохранить&quot;&nbsp;из таблицы list_template_attribute_lists удаляется только выбранный список <span style="color: rgb(0,128,0);">list_id для указанного Шаблона-Атрибута</span>.</li></ol></li>
<li>Удаление Списка в разделе&nbsp;&quot;Атрибуты и Списки&quot; в карточке шаблона АДАС.&nbsp;
<ol>
<li>Через <ac:link ac:anchor="Удаление списка из журнала"><ac:plain-text-link-body><![CDATA[боковую панель напротив выбранного списка]]></ac:plain-text-link-body></ac:link>&nbsp;при нажатии на значок &quot;Корзина&quot;.&nbsp;&nbsp;При нажатии на кнопку в действиях возникает сообщение-подтверждение &quot;Удалить объект&quot; и &quot;Х&quot; (отменить).
<ol>
<li>если выбранный список привязан к Атрибуту, к которому привязаны и другие списки (в рамках редактируемого шаблона), то удаляется лишь связь Атрибут - выбранный Список.&nbsp; При нажатии на &quot;Удалить объект&quot; из таблицы list_template_attribute_lists<span style="color: rgb(0,128,0);"><s> из массива списков, привязанных к Атрибуту,</s></span> удаляется только выбранный список <span style="color: rgb(0,128,0);">list_id. привязанный к Шаблону-Атрибуту</span>. При нажатии&nbsp;&quot;Отменить&quot;&nbsp; - возврат к карточке шаблона АДАС.</li>
<li>если выбранный список - единственный, привязанный к данному Атрибуту в редактируемом шаблоне, то удаляется полностью связь Шаблона с Атрибутом и привязанными списками (list_template_attribute_lists).<span style="color: rgb(23,43,77);">&nbsp;Удаление Атрибута происходит, так как к Шаблону не может быть привязан Атрибут без списков.&nbsp;</span></li></ol></li>
<li><span style="color: rgb(23,43,77);">Выбор <ac:link ac:anchor="Удаление списка через чекбокс"><ac:plain-text-link-body><![CDATA[чекбокса ]]></ac:plain-text-link-body></ac:link>с названием удаляемого списка. Подтверждение действий происходит через появляющуюся внизу панельку с количеством удаляемых списков и кнопкой &quot;Удалить&quot;. Удаление связей на бэке аналогично описанному п.3.а.&nbsp;</span></li></ol></li></ol>
<p><br /></p>
<p>Макет удаления связи через боковую панель раздел &quot;Атрибуты и Списки&quot; и<ac:inline-comment-marker ac:ref="565b313b-3158-4743-acba-ed0bbb0f2067">з карточки шаблона АДАС</ac:inline-comment-marker></p><ac:structured-macro ac:name="anchor" ac:schema-version="1" ac:macro-id="dcbd078e-8cc7-4d28-8ea1-0f549eb86082"><ac:parameter ac:name="">Удаление через боковую панель</ac:parameter></ac:structured-macro>
<p><ac:image ac:width="800"><ri:attachment ri:filename="удаление через бок.JPG" /></ac:image></p>
<p><br /></p>
<p><ac:image ac:width="1200"><ri:attachment ri:filename="2023-10-17_12-42-17.png" /></ac:image></p>
<p><ac:structured-macro ac:name="anchor" ac:schema-version="1" ac:macro-id="3fa10997-c5bf-4478-9007-315d8bef41cd"><ac:parameter ac:name="">Удаление через чекбокс Атрибуты</ac:parameter></ac:structured-macro>Макет удаления всех связей Атрибута через раздел &quot;Атрибуты и Списки&quot; из карточки шаблона АДАС</p>
<p><ac:image ac:width="1200"><ri:attachment ri:filename="2023-10-17_12-42-49.png" /></ac:image></p>
<p><ac:image ac:width="1200"><ri:attachment ri:filename="2023-10-17_12-43-31.png" /></ac:image></p>
<p><ac:structured-macro ac:name="anchor" ac:schema-version="1" ac:macro-id="0e4c7336-b0ca-468c-8aa3-1b9502cc26c4"><ac:parameter ac:name="">Удаление из модального окна</ac:parameter></ac:structured-macro>Макет удаления всех связей Атрибута через модальное окно &quot;Атрибуты и Списки&quot; открытое на редактирование</p>
<p><ac:image ac:height="198"><ri:attachment ri:filename="2023-08-04_14-07-44.png" /></ac:image></p>
<p><ac:structured-macro ac:name="anchor" ac:schema-version="1" ac:macro-id="1b5a313c-a25d-4d47-88ac-f235f9ca54e0"><ac:parameter ac:name="">Удаление списка из журнала</ac:parameter></ac:structured-macro>Макет удаления связи Списка с Атрибутов через боковое меню&nbsp;раздела &quot;Атрибуты и Списки&quot;</p>
<p><ac:image ac:width="800"><ri:attachment ri:filename="удаление 1.JPG" /></ac:image></p>
<p><ac:image ac:width="1200"><ri:attachment ri:filename="2023-10-17_12-44-17.png" /></ac:image></p>
<p><ac:structured-macro ac:name="anchor" ac:schema-version="1" ac:macro-id="81f557ca-bb3d-4d63-a441-9eb6138b59c9"><ac:parameter ac:name="">Удаление списка через чекбокс</ac:parameter></ac:structured-macro>Макет удаления связи Атрибута и Списка&nbsp;через чекбокс раздела &quot;Атрибуты и Списки&quot; из карточки шаблона АДАС</p>
<p><ac:image ac:width="800"><ri:attachment ri:filename="удалить через чекбокс.JPG" /></ac:image></p>
<p>Для удаления связей необходимо&nbsp;реализовать следующие operationId:</p>
<table class="wrapped relative-table" style="width: 92.189%;"><colgroup><col style="width: 9.659%;" /><col style="width: 27.9354%;" /><col style="width: 15.2184%;" /><col style="width: 6.67098%;" /><col style="width: 40.5149%;" /></colgroup>
<thead>
<tr>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Компонент</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">OperationId</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">Описание</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Тип API</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">Что делаем</p></th></tr></thead>
<tbody>
<tr>
<td colspan="1">bo-control-action-list</td>
<td colspan="1">controlActionListRelationIControllerDeleteAttributeIndexListId</td>
<td colspan="1">Удалить у шаблона связь списка с атрибутом
<p>(Удаление списка для выбранного Атрибута в шаблоне АДАС)</p></td>
<td colspan="1">Внутреннее</td>
<td style="text-align: left;" colspan="1">
<p><em>Новый метод</em></p>
<p>Удалить запись из таблицы list_template_attributes_lists по id шаблона + id атрибута + id списка.</p>
<p><span style="color: rgb(153,51,0);">Если этот шаблон АДАС привязан хоть к 1 правилу, то:&nbsp;</span></p>
<ul>
<li><span style="color: rgb(23,43,77);">Записать команду UPDATE по каждому отредактированному шаблону АДАС в таблицу&nbsp;state_commands&nbsp;</span></li>
<li><span style="color: rgb(23,43,77);"><span style="color: rgb(153,51,0);"><span style="color: rgb(153,204,0);">количество сообщений = количеству привязанных правил к шаблону</span></span></span></li></ul>
<p><span style="color: rgb(153,51,0);">Если этот шаблон АДАС не имеет связи с правилом, то команду в Ядро не отдаем.</span></p></td></tr>
<tr>
<td colspan="1">bo-control-action-list</td>
<td colspan="1">controlActionListRelationIControllerDeleteAttributeIndex</td>
<td colspan="1">Удалить связь Атрибута с шаблоном АДАС</td>
<td colspan="1">Внутреннее</td>
<td colspan="1">
<p><em>Новый метод</em></p>
<p>Удалить запись/записи из таблицы list_template_attributes_lists по id шаблона + id атрибута</p>
<p>(удаляется атрибут и все привязанные списки).</p>
<p><span style="color: rgb(153,51,0);">Если связь Шаблон-Атрибут не единственная и к Шаблону привязано хоть 1 правило, то:</span></p>
<ul>
<li><span style="color: rgb(23,43,77);">Записать команду UPDATE по каждому отредактированному шаблону АДАС в таблицу&nbsp;state_commands&nbsp;</span></li>
<li><span style="color: rgb(23,43,77);"><span style="color: rgb(153,51,0);"><span style="color: rgb(153,204,0);">количество сообщений = количеству привязанных правил к шаблону</span></span></span></li></ul>
<p><span style="color: rgb(153,51,0);">Если связь Шаблон-Атрибут единственная и к Шаблону привязано хоть 1 правило, то:</span></p>
<ul>
<li><span style="color: rgb(153,51,0);">Записать команду DELETE по каждому отредактированному шаблону АДАС в таблицу&nbsp;state_commands</span></li>
<li><span style="color: rgb(153,51,0);"><span style="color: rgb(153,204,0);">количество сообщений = количеству привязанных правил к шаблону</span></span></li></ul></td></tr></tbody></table>
<p><strong>Интеграция с Ядром</strong></p>
<p>(<em>текущий функционал, не меняется в рамках доработки</em>)</p>
<table class="wrapped relative-table" style="width: 88.7775%;"><colgroup><col style="width: 10.0944%;" /><col style="width: 14.3661%;" /><col style="width: 17.658%;" /><col style="width: 9.37857%;" /><col style="width: 18.8624%;" /><col style="width: 29.6304%;" /></colgroup>
<thead>
<tr>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Компонент</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">message</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" data-highlight-colour="green">
<p title="">Описание</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Тип API</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Переменная окружения</p></th>
<th class="highlight-green" style="text-align: left;" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">
<p title="">Пример команды</p></th></tr></thead>
<tbody>
<tr>
<td colspan="1">
<p>bo-control-action-list</p>
<p><br /></p></td>
<td colspan="1">updateListSettingsCommand</td>
<td colspan="1">
<p>Обновление шаблона, привязанного к правилу</p>
<p>Редактирование связи Атрибут-Список у шаблона, привязанного к правилу</p>
<p><br /></p></td>
<td style="text-align: left;" colspan="1">Интеграционное</td>
<td style="text-align: left;" colspan="1">
<p>KAFKA_TOPIC_UPDATE_LIST_TEMPLATE</p>
<p>(значение по умолчанию отсутствует</p></td>
<td style="text-align: left;" colspan="1">
<div class="content-wrapper"><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="f18775dc-74aa-4537-a736-0314bb0ef576"><ac:parameter ac:name="language">js</ac:parameter><ac:parameter ac:name="theme">Emacs</ac:parameter><ac:plain-text-body><![CDATA[{
  "kind": "update",
  "ruleId": "efb3fd24-ddd5-47c2-be58-68b725936ddb",
  "listSettingsTemplateMetadata": {
    "id": "7f12ac1f-3d21-4491-899c-e3789b427dc5",
    "lists": [
       {"id": "07d74672-e8fb-49f3-ba79-41a5fd707c6b",
        "attributeName": "Канал"
       },
       {"id": "f0aae6ab-1514-41fd-bdbd-cf55fd0cc143",
        "attributeName": "Сумма платежа"
       }
     ]
    "action": "ADD",
    "attributeTTL": "120",
    "ttlShift": "0"
  }
}]]></ac:plain-text-body></ac:structured-macro></div></td></tr></tbody></table>
<h2><ac:structured-macro ac:name="anchor" ac:schema-version="1" ac:macro-id="d14ed4f7-289b-4349-847d-979e2a0cc220"><ac:parameter ac:name="">Использование в правилах</ac:parameter></ac:structured-macro>Изменение проверок раздела &quot;Использование в правилах&quot;</h2>
<p>При добавлении связи правила и шаблона АДАС на фронте и на бэке и <span style="color: rgb(255,0,255);">по</span>&nbsp;<span style="color: rgb(255,0,255);">нажатию кнопки &quot;Добавить&quot;</span> &nbsp;реализовать проверку не удалены ли выбранные правила, иначе - <s><span style="color: rgb(255,0,255);">кнопку &quot;Добавить&quot; сделать недоступной, не добавлять связь Шаблон - Правило, на экран выводить сообщение об ошибке &quot;Объект был удален&quot;.&nbsp; </span></s><span style="color: rgb(255,0,255);">в правом нижнем углу страницы выводить ошибку &quot;Ошибка валидации. Указанные правила не найдены в сервисе правил или неактивны: &lt;список идентификаторов правил&gt; ] &quot;. Модальное окно &quot;Добавить правила&quot; закрывается, добавление правил в шаблону АДАС не происходит.</span></p>
<p><span style="color: rgb(102,102,153);">В модальном окне оставляем текущую возможность сортировки по всем полям.</span></p>
<p><ac:image ac:width="800"><ri:attachment ri:filename="Actions_rules edit (1).png" /></ac:image></p>
<p><span style="color: rgb(255,0,0);">Для поиска правил, доступных для привязки использовать существующий метод:</span></p>
<table class="wrapped">
<thead>
<tr>
<th class="highlight-green" style="text-align: left;" data-highlight-colour="green">
<p title="">Компонент</p></th>
<th class="highlight-green" style="text-align: left;" data-highlight-colour="green">
<p title="">OperationId</p></th>
<th class="highlight-green" style="text-align: left;" data-highlight-colour="green">
<p title="">Описание</p></th>
<th class="highlight-green" style="text-align: left;" data-highlight-colour="green">
<p title="">Тип API</p></th>
<th class="highlight-green" style="text-align: left;" data-highlight-colour="green">
<p title="">Что делаем</p></th></tr>
<tr>
<td colspan="1"><span style="color: rgb(255,0,0);">bo-analytic / rule</span></td>
<td colspan="1"><span style="color: rgb(255,0,0);">policyRuleEControllerFindAllRuleInfo</span></td>
<td colspan="1"><span style="color: rgb(255,0,0);">Возвращает страницу с информацией о правилах</span></td>
<td colspan="1"><span style="color: rgb(255,0,0);">Внешнее</span></td>
<td colspan="1"><span style="color: rgb(255,0,0);">Существующий метод</span></td></tr></thead></table>
<h2>&nbsp;Недоступность деактивации атрибутов и удаления списков, привязанных к Шаблону АДАС</h2>
<table class="relative-table wrapped" style="width: 43.7807%;"><colgroup><col style="width: 33.3814%;" /><col style="width: 45.9733%;" /><col style="width: 20.6465%;" /></colgroup>
<tbody>
<tr>
<th class="highlight-green" colspan="1" data-highlight-colour="green">Компонент</th>
<td class="highlight-green" colspan="1" data-highlight-colour="green"><strong title="">bo-front</strong></td>
<td class="highlight-green" colspan="1" data-highlight-colour="green"><strong title="">bo-analytic</strong></td></tr>
<tr>
<th colspan="1"><span style="color: rgb(0,0,0);">GIT repository</span></th>
<td colspan="1"><ac:placeholder>указываем ссылку на репозиторий</ac:placeholder></td>
<td colspan="1"><br /></td></tr>
<tr>
<th colspan="1"><span style="color: rgb(0,0,0);">Ответственный за компонент</span></th>
<td colspan="1">
<div class="content-wrapper">
<p><ac:placeholder>указываем ответственного за компонент</ac:placeholder></p></div></td>
<td colspan="1"><br /></td></tr>
<tr>
<th style="text-align: left;" colspan="1"><span style="color: rgb(0,0,0);">Ссылка на задачу</span></th>
<td style="text-align: left;" colspan="1"><span style="color: rgb(112,112,112);"><span><em>указываем ссылку на задачу в рамках которой разрабатывается/обновляется компонент</em></span></span></td>
<td colspan="1"><br /></td></tr></tbody></table>
<h3>&nbsp;Невозможность вывода из экплуатации атрибутов, привязанных к шаблону АДАС</h3>
<p>Макет &quot;Ошибка при деактивации атрибута, привязанного к шаблону АДАС&quot;</p>
<p><ac:image ac:width="800"><ri:attachment ri:filename="image2023-8-15_16-9-4.png" /></ac:image></p>
<p>Для атрибутов, привязанных к хотя бы 1 Шаблону АДАС&nbsp;(при наличии записи в таблице&nbsp;bo-control-action-list.list_template_attribute_lists по index атрибута) необходимо:</p>
<ul>
<li>запретить их вывод из эксплуатации через свитчер &quot;Статус&quot; в Карточке атрибута и в Журнале атрибутов.</li></ul>
<p><span style="color: rgb(0,128,128);">При этом свитчер доступен к переключению, запрос с bo-front отправляется на бэк, бэк возвращает ошибку&nbsp;&quot;Операция невозможна, следующие атрибуты используются в шаблонах АДАС: XXXX&quot;. <em>Данная реализация является временной и потребует переработки после внедрения &quot;связиста&quot;.</em></span></p>
<ul>
<li><s><span style="color: rgb(0,128,128);">свитчер должен быть задизейблен и</span></s></li>
<li><s><span style="color: rgb(0,128,128);">при наведении на свитчер должно появляться сообщение &quot;Объект связан с другими элементами системы&quot;.</span></s></li></ul>
<h3>&nbsp;Невозможность удаления списков, привязанных к шаблону АДАС</h3>
<p>Для списков, привязанных к хотя бы 1 Шаблону АДАС&nbsp;(при наличии записи в таблице&nbsp;bo-control-action-list.list_template_attribute_lists по id списка) необходимо:</p>
<ul>
<li>запретить их удаление (единичное и массовое) в Карточке &quot;Списка 2.0&quot; и в Журнале &quot;Списка 2.0&quot;.&nbsp; При этом <span style="color: rgb(0,128,128);">кнопка&nbsp;&quot;Корзина&quot; доступна для нажатия, запрос с bo-front отправляется на бэк, бэк возвращает ошибку&nbsp;&quot;Операция невозможна, следующие списки используются в шаблонах АДАС: XXXX&quot;. <em>Данная реализация является временной и потребует переработки после внедрения &quot;связиста&quot;.</em></span>
<ul>
<li><s>кнопка &quot;Корзина&quot; должна быть недоступна;</s></li>
<li><s>при наведении на &quot;Корзину&quot; должно появляться сообщение &quot;Объект связан с другими элементами системы&quot;.</s></li></ul></li></ul>
<p>Макеты и описание функционала отражено в&nbsp;<a href="https://confluence.sberbank.ru/pages/viewpage.action?pageId=11575766942#id-%D0%A1%D0%A2%D0%90%D0%A1.%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B02.0-%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%A1%D0%BF%D0%B8%D1%81%D0%BA%D0%B02.05.5.">СТАС. Списки 2.0 - Проект Антифрод - Confluence SberWorks (sberbank.ru)</a>&nbsp;в разделе 5.5. &quot;Удаление Списка 2.0&quot;.&nbsp;</p>
<h3><span style="color: rgb(153,51,0);">&nbsp;Невозможность удаления правил, привязанных к шаблону АДАС</span></h3>
<p><span style="color: rgb(153,51,0);">Для правил, привязанных к Шаблону АДАС&nbsp;(при наличии записи в таблице&nbsp;bo-control-action-list.list_template_to_rule по id правила) необходимо:</span></p>
<ul>
<li><span style="color: rgb(153,51,0);">запретить их удаление в Карточке &quot;Правила&quot; и в Журнале &quot;Правила&quot;.&nbsp; При этом&nbsp;<span style="color: rgb(0,128,128);">кнопка &quot;Корзина&quot; доступна для нажатия, запрос с bo-front отправляется на бэк, бэк возвращает ошибку&nbsp;&quot;Операция невозможна, следующие правила используются в шаблонах АДАС: XXXX&quot;. <em>Данная реализация является временной и потребует переработки после внедрения &quot;связиста&quot;.</em></span></span>
<ul>
<li><s><span style="color: rgb(0,128,128);">кнопка &quot;Корзина&quot; должна быть недоступна;</span></s></li>
<li><s><span style="color: rgb(0,128,128);">при наведении на &quot;Корзину&quot; должно появляться сообщение &quot;Объект связан с другими элементами системы&quot;.</span></s></li></ul></li></ul>
<h2>Требования к формату <ac:inline-comment-marker ac:ref="73aaf33c-7bf8-4756-b060-e8c67500962d">хранения</ac:inline-comment-marker>&nbsp;</h2>
<h4>&nbsp;Схема данных</h4><ac:structured-macro ac:name="expand" ac:schema-version="1" ac:macro-id="e3ee812b-5768-4d46-ba9e-0f7aca333def"><ac:parameter ac:name="title">Схема данных</ac:parameter><ac:rich-text-body><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="a7b5b2e7-795d-4996-940e-4e7f043e883c"><ac:parameter ac:name="language">sql</ac:parameter><ac:parameter ac:name="theme">DJango</ac:parameter><ac:plain-text-body><![CDATA[create table list_template_attribute_lists
(
    list_template_id    uuid references list_template (id) ON DELETE RESTRICT,
	attribute_index		int,
    list_id           	UUID not null,
    primary key (list_template_id, attribute_index)
);

comment on table list_template_attribute_lists is 'Информация о связях шаблона с атрибутами и списками';
comment on column list_template_id is 'Идентификатор шаблона АДАС';
comment on column attribute_index is 'Индекс атрибута из bfp_bo_analytic.attribute';
comment on column list_id is 'Идентификатор списка из bfp_bo_analytic.lists';]]></ac:plain-text-body></ac:structured-macro></ac:rich-text-body></ac:structured-macro>
<h4>ER-диаграмма</h4>
<p><br /></p>
<p><ac:structured-macro ac:name="drawio" ac:schema-version="1" ac:macro-id="673163bb-ee8a-40c0-8756-ce749db3fe70"><ac:parameter ac:name="border">true</ac:parameter><ac:parameter ac:name="" /><ac:parameter ac:name="diagramName">АДАС</ac:parameter><ac:parameter ac:name="simpleViewer">false</ac:parameter><ac:parameter ac:name="width" /><ac:parameter ac:name="links">auto</ac:parameter><ac:parameter ac:name="tbstyle">top</ac:parameter><ac:parameter ac:name="lbox">true</ac:parameter><ac:parameter ac:name="diagramWidth">821</ac:parameter><ac:parameter ac:name="revision">7</ac:parameter></ac:structured-macro></p>
<h3>Требования к программным&nbsp;интерфейсам</h3>
<p><a href="https://stash.sigma.sbrf.ru/projects/TAF_ARM/repos/openapi/pull-requests/56/overview">Просмотр API.&nbsp;</a></p>
<p>Необходимо внести изменения&nbsp; в следующие&nbsp;<span style="letter-spacing: 0.0px;">operationId:</span></p>
<table class="relative-table wrapped" style="width: 90.8257%;"><colgroup><col style="width: 6.87037%;" /><col style="width: 28.3483%;" /><col style="width: 24.8553%;" /><col style="width: 9.16692%;" /><col style="width: 9.16692%;" /><col style="width: 21.5817%;" /></colgroup>
<tbody>
<tr>
<th class="highlight-green" title="Цвет фона: Зеленый" data-highlight-colour="green">Компонент</th>
<th class="highlight-green" title="Цвет фона: Зеленый" data-highlight-colour="green"><span title="">operationId</span></th>
<th class="highlight-green" title="Цвет фона: Зеленый" data-highlight-colour="green">Endpoint</th>
<th class="highlight-green" title="Цвет фона: Зеленый" data-highlight-colour="green">Описание</th>
<th class="highlight-green" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">Тип API</th>
<th class="highlight-green" title="Цвет фона: Зеленый" colspan="1" data-highlight-colour="green">Изменения</th></tr>
<tr>
<td><s><span style="color: rgb(0,0,255);">bo-control-action-list</span></s></td>
<td><s><span style="color: rgb(0,0,255);">actionListIntegrationControllerGetAll</span></s></td>
<td>
<p><s><span style="color: rgb(0,0,255);">/integration/v1/state</span></s></p>
<p><s><span style="color: rgb(0,0,255);">GET</span></s></p></td>
<td><s><span style="color: rgb(0,0,255);">Интеграционное API УВ по добавлению в списки</span></s></td>
<td colspan="1"><s><span style="color: rgb(0,0,255);">Интеграционное</span></s></td>
<td colspan="1">
<div class="content-wrapper">
<p><s><span style="color: rgb(0,0,255);">Существующий метод</span></s></p>
<p><s><span style="color: rgb(0,0,255);">Добавить параметры:</span></s></p>
<ul>
<li><s><span style="color: rgb(0,0,255);">templateName - название шаблона АДАС</span></s></li>
<li><s><span style="color: rgb(0,0,255);">description - Описание шаблона АДАС</span></s></li>
<li><s><span style="color: rgb(0,0,255);">listName - наименование списка</span></s></li></ul>
<p><br /></p><s><span style="color: rgb(0,0,255);">На стороне Ядра менять интеграцию не требуется, сервис Ядра принимает новые поля без ошибок.</span></s></div></td></tr>
<tr>
<td colspan="1"><s><span style="color: rgb(255,0,0);">bo-control-action-list</span></s></td>
<td colspan="1"><s><span style="color: rgb(255,0,0);">controlActionListEControllerGetAttributes</span></s></td>
<td colspan="1"><s><span style="color: rgb(255,0,0);">/external/v1/control-action-list/{id}/attribute/findAll</span></s><br /><s><span style="color: rgb(255,0,0);">GET</span></s></td>
<td colspan="1"><s><span style="color: rgb(255,0,0);">Поиск атрибутов, доступных для привязки к текущему шаблону АДАС</span></s></td>
<td colspan="1"><s><span style="color: rgb(255,0,0);">Внешнее</span></s></td>
<td colspan="1">
<p><s><span style="color: rgb(255,0,0);"><em>Новый метод.</em></span></s></p>
<p><s><span style="color: rgb(255,0,0);">Поиск атрибутов, доступных для привязки к текущему шаблону АДАС:</span></s></p>
<ul>
<li><s><span style="color: rgb(255,0,0);">атрибуты типа String</span></s></li>
<li><s><span style="color: rgb(255,0,0);">атрибут введен в эксплуатацию (attribute.state=true)</span></s></li>
<li><s><span style="color: rgb(255,0,0);">атрибут еще не привязан к данному шаблону АДАС</span></s></li></ul></td></tr>
<tr>
<td colspan="1"><s><span style="color: rgb(255,0,0);">bo-control-action-list</span></s></td>
<td colspan="1"><s><span style="color: rgb(255,0,0);">controlActionListEControllerGetList</span></s></td>
<td colspan="1"><s><span style="color: rgb(255,0,0);">/external/v1/control-action-list/{id}/list/findAll</span></s><br /><s><span style="color: rgb(255,0,0);">GET</span></s></td>
<td colspan="1"><s><span style="color: rgb(255,0,0);">Поиск списков, доступных для привязки к Атрибуту в Шаблоне АДАС</span></s></td>
<td colspan="1"><s><span style="color: rgb(255,0,0);">Внешнее</span></s></td>
<td colspan="1">
<p><s><span style="color: rgb(255,0,0);"><em>Измененный метод.</em></span></s></p>
<p><s><span style="color: rgb(255,0,0);">Поиск списков, доступных для привязки:</span></s></p>
<ul>
<li><s><span style="color: rgb(255,0,0);">списки типа String</span></s></li>
<li><s><span style="color: rgb(255,0,0);">без признака Автосинхронизации</span></s></li></ul></td></tr>
<tr>
<td colspan="1">bo-control-action-list</td>
<td colspan="1"><span style="color: rgb(255,0,0);">controlActionListDeleteList</span></td>
<td colspan="1">
<p><span style="color: rgb(255,0,0);">/external/v1/control-action-list/{id}/deleteList</span></p>
<p>DELETE</p></td>
<td colspan="1">
<p>Удалить связь Атрибут - Список у шаблона АДАС</p>
<p>(Удаление списка для выбранного Атрибута в шаблоне АДАС)</p></td>
<td colspan="1"><span style="color: rgb(128,0,128);">Внешнее</span></td>
<td colspan="1">
<p><em>Новый метод</em></p>
<p>Удалить запись из таблицы list_template_attributes_lists по id шаблона +[ id атрибута + id списка ]</p>
<p><span style="color: rgb(153,51,0);">Если этот шаблон АДАС привязан хоть к 1 правилу, то:&nbsp;</span></p>
<ul>
<li><span style="color: rgb(23,43,77);">Записать команду UPDATE по каждому отредактированному шаблону АДАС в таблицу&nbsp;state_commands</span></li>
<li><span style="color: rgb(153,51,0);"><span style="color: rgb(153,204,0);">количество сообщений = количеству привязанных правил к шаблону</span></span></li></ul>
<p><span style="color: rgb(153,51,0);">Если этот шаблон АДАС не имеет связи с правилом, то команду в Ядро не отдаем.</span></p></td></tr>
<tr>
<td colspan="1">bo-control-action-list</td>
<td colspan="1"><span style="color: rgb(255,0,0);">controlActionListDeleteAttributeIndex</span></td>
<td colspan="1"><span style="color: rgb(255,0,0);">/external/v1/control-action-list/{id}/deleteAttribute</span><br /><br />DELETE</td>
<td colspan="1">Удалить связь Атрибута с шаблоном АДАС</td>
<td colspan="1"><span style="color: rgb(128,0,128);">Внешнее</span></td>
<td colspan="1">
<p><em>Новый метод</em></p>
<p>Удалить запись/записи из таблицы list_template_attributes_lists по id шаблона +[ id атрибута ]</p>
<p>(удаляется атрибут и все привязанные списки).</p>
<p><span style="color: rgb(153,51,0);">Если связь Шаблон-Атрибут не единственная и к Шаблону привязано хоть 1 правило, то:</span></p>
<ul>
<li><span style="color: rgb(23,43,77);">Записать команду UPDATE по каждому отредактированному шаблону АДАС в таблицу&nbsp;state_commands</span></li>
<li><span style="color: rgb(153,51,0);"><span style="color: rgb(153,204,0);">количество сообщений = количеству привязанных правил к шаблону</span></span></li></ul>
<p><span style="color: rgb(153,51,0);">Если связь Шаблон-Атрибут единственная и к Шаблону привязано хоть 1 правило, то:</span></p>
<ul>
<li><span style="color: rgb(153,51,0);">Записать команду DELETE по каждому отредактированному шаблону АДАС в таблицу&nbsp;state_commands</span></li>
<li><span style="color: rgb(153,51,0);"><span style="color: rgb(153,204,0);">количество сообщений = количеству привязанных правил к шаблону</span></span></li></ul></td></tr>
<tr>
<td colspan="1"><span style="color: rgb(128,0,128);">bo-control-action-list</span></td>
<td colspan="1"><span style="color: rgb(0,0,255);">getControlActonLists</span></td>
<td colspan="1"><span style="color: rgb(128,0,128);">/integration/v1/control-action-list</span><br /><span style="color: rgb(128,0,128);">GET</span></td>
<td colspan="1"><span style="color: rgb(128,0,128);">Получить все шаблоны АДАС в системе</span></td>
<td colspan="1"><span style="color: rgb(128,0,128);">Интеграционное</span></td>
<td colspan="1">
<p><em><span style="color: rgb(128,0,128);">Новый метод</span></em></p>
<p><span style="color: rgb(128,0,128);">Передача всех шаблонов АДАС в Case Management</span></p></td></tr>
<tr>
<td colspan="1"><span style="color: rgb(255,0,0);">bo-control-action-list</span></td>
<td colspan="1"><span style="color: rgb(255,0,0);">controlActionListEControllerGetRuleWithoutRelation</span></td>
<td colspan="1"><span style="color: rgb(255,0,0);">/external/v1/control-action-list/{id}/rule/findAll</span><br /><span style="color: rgb(255,0,0);">GET</span></td>
<td colspan="1"><span style="color: rgb(255,0,0);">Пагинированный поиск правил, доступных для привязки (нет связи с любым</span><br /><span style="color: rgb(255,0,0);">шаблоном)</span></td>
<td colspan="1"><span style="color: rgb(255,0,0);">Внешнее</span></td>
<td colspan="1">
<p><span style="color: rgb(255,0,0);">Метод удален.&nbsp;</span></p>
<p><span style="color: rgb(255,0,0);">Вместо него будет использоваться существующий&nbsp;</span></p><span style="color: rgb(255,0,0);">/external/v1/policy-rule/info</span></td></tr>
<tr>
<td colspan="1"><span style="color: rgb(153,51,0);">bo-control-action-list</span></td>
<td colspan="1"><span style="color: rgb(153,51,0);">actionListIntegrationControllerGetAll</span></td>
<td colspan="1"><span style="color: rgb(153,51,0);">/integration/v1/state</span></td>
<td colspan="1"><span style="color: rgb(153,51,0);">Передача шаблонов АДАС в Ядро</span></td>
<td colspan="1"><span style="color: rgb(153,51,0);">Внешнее</span></td>
<td colspan="1">
<p><span style="color: rgb(153,51,0);">Существующий метод</span></p>
<p><span style="color: rgb(153,51,0);">Необходимо добавить условие фильтрации шаблонов АДАС:</span></p>
<ul>
<li><span style="color: rgb(153,51,0);">Передавать только Шаблоны АДАС, привязанные хоть к 1 правилу (list_template_to_rule) и имеющими хоть 1 связь Атрибуты - Списки (list_template_attribute_lists).</span></li></ul></td></tr></tbody></table>
<p><br /></p>
<h4><span style="color: rgb(153,51,0);">Условия передачи команд в Ядро</span></h4><ac:structured-macro ac:name="note" ac:schema-version="1" ac:macro-id="d365c49f-6542-47ab-b442-517ea872006e"><ac:parameter ac:name="title">ВАЖНО!!!</ac:parameter><ac:rich-text-body>
<p><strong><span style="color: rgb(153,204,0);">При обновлении параметров Шаблона, обновлении элементов Атрибут-Список в Ядро уходит количество сообщений =&nbsp; количеству привязанных к шаблону правил.</span></strong></p>
<p><strong><span style="color: rgb(153,204,0);">При привязке\отвязке правила в Ядро уходит количество сообщений = количеству привязанных\отвязанных правил.</span></strong></p>
<p><strong><span style="color: rgb(153,204,0);">При удалении самого Шаблона АДАС&nbsp;в Ядро уходит количество сообщений = количеству привязанных\отвязанных правил.</span></strong></p></ac:rich-text-body></ac:structured-macro>
<table class="wrapped"><colgroup><col style="width: 208.0px;" /><col style="width: 696.0px;" /></colgroup>
<tbody>
<tr>
<th colspan="1"><span style="color: rgb(153,51,0);">Команда в Ядро</span></th>
<th><span style="color: rgb(153,51,0);">Действие</span></th></tr>
<tr>
<td rowspan="2">
<p><span style="color: rgb(153,51,0);">UPDATE&nbsp;</span></p>
<p><span style="color: rgb(153,51,0);">(updateListSettingsCommand)</span></p></td>
<td>
<p><span style="color: rgb(153,51,0);">Привязка к новому шаблону АДАС хотя бы 1 правила и 1 пары Атрибут-Список.</span></p>
<p><span style="color: rgb(153,51,0);">(Шаблоны АДАС со связью Атрибут-Список, но без привязанных правил не отправляются в Ядро.</span></p>
<p><span style="color: rgb(153,51,0);">Шаблоны АДАС с привязанным правилом, но без связи Атрибут-Список не отправляются в Ядро.</span></p>
<p><span style="color: rgb(153,51,0);">И только когда пользователь сохранил Шаблон АДАС, у которого есть и связь Атрибут-Список и привязанное правило, тогда команда уйдет в Ядро).</span></p></td></tr>
<tr>
<td>
<p><span style="color: rgb(153,51,0);">Обновление существующего шаблона АДАС:</span></p>
<ul>
<li><span style="color: rgb(153,51,0);">добавление правила <s>\ удаление не единственного правила</s> на шаблоне АДАС;</span></li>
<li><span style="color: rgb(153,51,0);">добавление связей \ удаление не единственной (не всех связей одновременно) Атрибут - Список;</span></li>
<li><span style="color: rgb(153,51,0);">редактирование параметров шаблона АДАС, имеющим хоть 1 связь с правилом и с Атрибут-Список.</span></li></ul></td></tr>
<tr>
<td rowspan="2">
<p><span style="color: rgb(153,51,0);">DELETE</span></p>
<p><span style="color: rgb(153,51,0);">(<span style="letter-spacing: 0.0px;">deleteListSettingsCommand)</span></span></p></td>
<td colspan="1"><span style="color: rgb(153,51,0);">Удаление шаблона АДАС из Карточки или из Журнала</span></td></tr>
<tr>
<td colspan="1">
<p><span style="color: rgb(153,51,0);">Обновление существующего шаблона:</span></p>
<ul>
<li><span style="color: rgb(153,51,0);">отвязка <s>единственного</s> правила от шаблона;</span></li>
<li><span style="color: rgb(153,51,0);">удаление всех связей Шаблон-Атрибут-Список.</span></li></ul>
<p><span style="color: rgb(153,51,0);">(Шаблоны АДАС без привязанных правил и\или без связи Атрибут-Список не отправляются в Ядро).</span></p></td></tr></tbody></table>
<p><ac:placeholder>- список значений (может или нет быть список значений в каком-то атрибуте и явно указать какой разделитель будет использован) &nbsp;</ac:placeholder></p>
<p><ac:placeholder>Вставить пример реальных сообщений с указанием данных, которые будут передаваться (максимально приблеженные к реальности). Какие примеры нужны - уточнить у разработчика</ac:placeholder></p>
<h1><span class="nh-number" style="color: rgb(0,0,0);">Нефункциональные требования&nbsp;<ac:placeholder>указываем общие требования для всех компонентов</ac:placeholder></span></h1>
<h2><span style="color: rgb(51,51,51);">Аудит</span></h2>
<p><span style="color: rgb(51,51,51);">Новые требования не предъявляются.</span></p>
<p><span style="color: rgb(51,51,51);">Текущие требования к аудиту сервиса <span style="color: rgb(23,43,77);">bo-control-action-list&nbsp;</span>описаны в&nbsp;<ac:link><ri:page ri:content-title="СТАС к модулю аудита действий пользователя" /></ac:link>.</span></p>
<p><span style="color: rgb(51,51,51);"><ac:placeholder>Указать какие данные будут переданы в аудит (пример: IP адрес пользователя, название действия )</ac:placeholder></span></p>
<h2><span style="color: rgb(51,51,51);">Логирование&nbsp;</span></h2>
<p><span style="color: rgb(23,43,77);">Согласно пункту 3&nbsp;</span><a href="https://confluence.sberbank.ru/pages/viewpage.action?pageId=7717763151" style="text-decoration: none;" rel="nofollow">Требования к логированию и мониторингу</a></p>
<h2><span style="color: rgb(51,51,51);">Мониторинг</span></h2>
<p>Новые требования не предъявляются.</p>
<h2>Безопасность</h2>
<p>Требования безопасности описаны на страницах:&nbsp;<a style="text-decoration: none;" href="https://confluence.sberbank.ru/pages/viewpage.action?pageId=7502398610" rel="nofollow">Требования ИБ к OpenShift</a>,&nbsp;<a style="text-decoration: none;" href="https://confluence.sberbank.ru/pages/viewpage.action?pageId=7502398623" rel="nofollow">Требования ИБ к Kafka</a></p></ac:rich-text-body></ac:structured-macro>
<p><br /></p>
<p><br /></p>
<p><br /></p>
<p><br /></p>